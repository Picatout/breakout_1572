MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00002 ;                BREAKOUT game
                      00003 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00004 ;             IMPLEMENTATION NOTES
                      00005 ;  PWM3 is used to generate NTSC synchronization signal.
                      00006 ;  An interrupt is triggered at begin of each horizontal scan line.
                      00007 ;  Inside this interrupt there is a round robin task scheduler.
                      00008 ;  All video display and game logic is done inside these tasks.
                      00009 ;  After MCU initialization the main() procedure is an empty loop.
                      00010 ;  The PIC12F1572 is clocked by an external oscillator running at
                      00011 ;  8 times NTSC chroma frequency  28.636Mhz.    
                      00012 ;  The CPU Fcy is 2*NTSC chroma frequency 7.159Mhz. This give a Tcy
                      00013 ;  short of 140 nanoseconds.
                      00014 ;  NTSC horizontal frequency being 15734 Hertz code inside the ISR
                      00015 ;  must execute in less than 454 Tcy.    
                      00016 ;  The overhead before entering a task in at most 58Tcy.
                      00017 ;  The 'next_task' macro and the 'isr_exit' code use 17Tcy at most.
                      00018 ;  To play safe any task should execute in less than 379Tcy.
                      00019 ;  VISIBLE video lines:
                      00020 ;   For the visibles video lines tasks some delay is introduce
                      00021 ;   before any display attempt to ensure the game left side is
                      00022 ;   inside visible part of the scan line.
                      00023 ;   Each visible line must be terminate by returning video_output to black
                      00024 ;   otherwise the sync signal will be mangled. 
                      00025 ;    
                      00026 ;  VIDEO DISPLAY ZONES
                      00027 ;  scan lines     display
                      00028 ;  =======================    
                      00029 ;    30-49     |   score and balls count
                      00030 ;    50-57     |   top wall
                      00031 ;    58-250    |   play ground
                      00032 ;    58-73     |   empty zone
                      00033 ;    74-81     |   mauve bricks
                      00034 ;    82-89     |   yellow bricks
                      00035 ;    90-97     |   blue bricks
                      00036 ;    98-105    |   dark green bricks
                      00037 ;    106-113   |   gray bricks
                      00038 ;    114-250   |   empty zone
                      00039 ;    243-250   |   paddle zone    
                      00040 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00041  
                      00042     
                      00043     include p12f1572.inc
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Jan 21 2019
                      00005 ;  MPASM PIC12F1572 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2019 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      01601         LIST
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00044     
8007   3FA7           00045     __config _CONFIG1, _FOSC_ECH & _WDTE_OFF & _MCLRE_OFF
8008   1EFF           00046     __config _CONFIG2, _PLLEN_OFF & _LVP_OFF
                      00047     
                      00048     radix dec
                      00049 
                      00050 ; constants
  00000800            00051 PROG_SIZE equ 2048  ; program words
  00000080            00052 EEPROM_SIZE equ 128 ; high endurance flash words
                      00053  
  01B4F360            00054 Fosc equ 28636000 ; external oscillator frequency
  006D3CD8            00055 Fcy  equ (Fosc/4) ; cpu frequency, machine cycle  T=1/Fcy
  0000008C            00056 Tcy equ 140 ; CPU cycle in nanoseconds (139.683nS)
                      00057  
                      00058 ; NTSC signal 
  00003D76            00059 Fhorz equ 15734 ; horizontal frequency
  0000071B            00060 HPERIOD equ ((Fosc/Fhorz)-1)  ; horizontal period pwm count(63,55µS)
  00000086            00061 HSYNC  equ 134  ;  (4,7µS) ; horz. sync. pwm pulse count
  00000041            00062 HEQUAL equ 65 ; 2,3µS equalization pwm pulse count
  00000308            00063 VSYNC_PULSE equ 776 ; 27,1µS vertical sync. pwm pulse count
  0000038D            00064 HALF_LINE equ ((Fosc/Fhorz/2)-1) 
                      00065 ; boolean flags 
  00000000            00066 F_HI_LINE equ 0 ; lcount > 255
  00000001            00067 F_EVEN equ 1    ; even field
  00000002            00068 F_SYNC equ 2    ; vertical synchronization phase
  00000003            00069 F_SOUND equ 3   ; sound enabled 
  00000004            00070 F_START equ 4   ; game started 
  00000005            00071 F_PAUSE equ 5   ; game pause after a ball lost
                      00072  
                      00073 ;pins assignment
  00000000            00074 AUDIO EQU RA0
  00000000            00075 PADDLE equ RA0
  00000001            00076 CHROMA equ RA1
  00000002            00077 SYNC_OUT equ RA2
  00000003            00078 START_BTN equ RA3 
  00000004            00079 VIDEO_OUT equ RA4
  00000005            00080 CLKIN equ RA5
                      00081  
                      00082     ; constants used in video display
                      00083 ; values are in Tcy for x dimension.
                      00084 ; values are in scan lines for y dimension.    
  0000001E            00085 FIRST_VIDEO_LINE equ 30 ; first video line displayed
  000000FA            00086 LAST_VIDEO_LINE  equ 250 ; last video line displayed
  00000034            00087 LEFT_MARGIN equ 52  ;  delay Tcy before any display
  000000F8            00088 COURT_WIDTH equ 248 ; Tcy
  00000008            00089 BRICK_HEIGHT equ 8  ; scan lines
  00000004            00090 BORDER_WIDTH equ 4  ; Tcy
  00000020            00091 PADDLE_WIDTH equ 32 ; Tcy
  00000008            00092 PADDLE_THICKNESS equ 8 ; scan lines
  0000004A            00093 PADDLE_LIMIT equ 74 ; Tcy
  00000008            00094 BALL_WIDTH equ 8 ; Tcy
  00000008            00095 BALL_HEIGHT equ 8 ; scan lines 
  00000000            00096 BALL_LEFT_BOUND equ 0 ; Tcy
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000052            00097 BALL_RIGHT_BOUND equ 82 ; Tcy
  0000003A            00098 BALL_TOP_BOUND equ 58  ; scan lines
  000000FA            00099 BALL_BOTTOM_BOUND equ LAST_VIDEO_LINE;-BRICK_HEIGHT ;
  000000F3            00100 PADDLE_Y equ LAST_VIDEO_LINE-PADDLE_THICKNESS+1 ; 
  0000004A            00101 ROW1_Y equ 74
  00000052            00102 ROW2_Y equ 82
  0000005A            00103 ROW3_Y equ 90
  00000062            00104 ROW4_Y equ 98
  0000006A            00105 ROW5_Y equ 106
                      00106  
                      00107 
                      00108 ;;;;;;;;;;;;;;;;;;;;;;
                      00109 ;; assembler macros ;;
                      00110 ;;;;;;;;;;;;;;;;;;;;;;
                      00111 
                      00112 ; leave task 
                      00113 leave macro
                      00114     goto isr_exit
                      00115     endm
                      00116     
                      00117 ; move to next task on slice limit
                      00118 ; parameters:
                      00119 ;   s  nomber of slices used by the task    
                      00120 next_task macro s    
                      00121     incf slice
                      00122     movlw s
                      00123     subwf slice,W
                      00124     skpz
                      00125     leave
                      00126     clrf slice
                      00127     incf task
                      00128     movlw s
                      00129     addwf lcount
                      00130     leave
                      00131     endm
                      00132     
                      00133     
                      00134 ; case switch
                      00135 ; parameters:
                      00136 ;   var is control variable
                      00137 ;   n  is constant to compare to var
                      00138 ;   adr  is goto address if var==n 
                      00139 case macro var, n, adr
                      00140     movlw n
                      00141     subwf var,W
                      00142     skpnz
                      00143     goto adr
                      00144     endm
                      00145 
                      00146 ; swap variable with WREG    
                      00147 swap_var macro var
                      00148     xorwf var
                      00149     xorwf var,W
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00150     xorwf var
                      00151     endm
                      00152     
                      00153 
                      00154 ; delay in machine cycle T
                      00155 ; parameters:
                      00156 ;   T   number of machine cycles    
                      00157 tdelay macro T
                      00158     variable q=(T)/3
                      00159     variable r=(T)%3
                      00160     if (q)
                      00161     movlw q
                      00162     decfsz WREG
                      00163     goto $-1
                      00164     endif
                      00165     if (r==2)
                      00166     goto $+1
                      00167     endif 
                      00168     if (r==1)
                      00169     nop
                      00170     endif
                      00171     endm
                      00172 
                      00173 ; enable weak pull on VIDEO_OUT
                      00174 ; to create a porch
                      00175 porch_on macro
                      00176     banksel WPUA
                      00177     bsf WPUA,VIDEO_OUT
                      00178     endm
                      00179     
                      00180 ; disable weak pull on VIDEO_OUT
                      00181 ; to remove porch
                      00182 porch_off macro
                      00183     banksel WPUA
                      00184     bcf WPUA,VIDEO_OUT
                      00185     endm
                      00186     
                      00187 ; enable chroma output
                      00188 chroma_on macro
                      00189     banksel TRISA
                      00190     bcf TRISA, CHROMA
                      00191     endm
                      00192     
                      00193 ;disable chroma output    
                      00194 chroma_off macro
                      00195     banksel TRISA
                      00196     bsf TRISA,CHROMA
                      00197     endm
                      00198     
                      00199 ; output chroma reference    
                      00200 chroma_ref macro
                      00201     banksel PWM1CON
                      00202     bcf PWM1CON,POL
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00203     endm
                      00204     
                      00205 ; set chroma phase to 180 degree
                      00206 chroma_invert macro
                      00207     banksel PWM1CON
                      00208     bsf PWM1CON,POL
                      00209     endm
                      00210 
                      00211 ;;;;;;;;;;;;;;;;;;;;;;
                      00212 ;   colors macros
                      00213 ; each one take 5 T 
                      00214 ;;;;;;;;;;;;;;;;;;;;;;
                      00215     
                      00216 ;set video output to black    
                      00217 black macro
                      00218 ;    banksel TRISA
                      00219     bsf TRISA,CHROMA
                      00220     bsf TRISA,VIDEO_OUT
                      00221 ;    goto $+1
                      00222     endm
                      00223     
                      00224 ; set video output to white    
                      00225 white macro    
                      00226 ;    banksel TRISA
                      00227     bsf TRISA,CHROMA
                      00228     bcf TRISA,VIDEO_OUT
                      00229 ;    goto $+1
                      00230     endm
                      00231 
                      00232 #define gray white
                      00233     
                      00234 ; set video output to mauve    
                      00235 mauve macro
                      00236 ;    chroma_ref
                      00237 ;    banksel TRISA
                      00238     bcf TRISA,VIDEO_OUT
                      00239     bcf TRISA,CHROMA
                      00240     endm
                      00241 
                      00242 ; set video output to yellow   
                      00243 yellow macro
                      00244 ;    chroma_invert
                      00245 ;    banksel TRISA
                      00246     bcf TRISA,VIDEO_OUT
                      00247     bcf TRISA,CHROMA
                      00248     endm
                      00249     
                      00250 ; set video output to blue
                      00251 blue macro
                      00252 ;    chroma_ref
                      00253 ;    banksel TRISA
                      00254     bsf TRISA, VIDEO_OUT
                      00255     bcf TRISA,CHROMA
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00256     endm
                      00257     
                      00258 ; set video output to dark blue    
                      00259 dark_green macro
                      00260 ;    chroma_invert
                      00261 ;    banksel TRISA
                      00262     bsf TRISA, VIDEO_OUT
                      00263     bcf TRISA,CHROMA
                      00264     endm
                      00265 
                      00266     
                      00267 ; draw a brick
                      00268 ; use 6T+BRICK_WIDTH
                      00269 ; if carry is 1 draw in color else draw black    
  00000015            00270 BRICK_WIDTH equ 21   
                      00271 draw_brick macro color
                      00272     local no_brick
                      00273     local brick_delay
                      00274     skpc
                      00275     bra no_brick
                      00276     color
                      00277     nop
                      00278     bra brick_delay
                      00279 no_brick
                      00280     black
                      00281     bra brick_delay 
                      00282 brick_delay    
                      00283     tdelay BRICK_WIDTH
                      00284     endm
                      00285 
                      00286 ; draw 8 bricks wall
                      00287 ; parameter in temp
                      00288 draw_wall macro color
                      00289     local next_brick
                      00290     movlw 8
                      00291     pushw
                      00292 next_brick    
                      00293     lslf temp
                      00294     draw_brick color
                      00295     decfsz T
                      00296     bra next_brick
                      00297     dropn 1
                      00298     endm
                      00299     
                      00300     
                      00301 ; draw left and right borders
                      00302 ; parameters:
                      00303 ;   width delay determine width
                      00304 ;   width 5T+nT    
                      00305 draw_border macro width
                      00306     banksel TRISA
                      00307     bsf TRISA,CHROMA
                      00308     bcf TRISA,VIDEO_OUT
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00309     tdelay width
                      00310     bsf TRISA,VIDEO_OUT
                      00311     endm
                      00312     
                      00313 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00314 ;  stack manipulation macros
                      00315 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    
  00000010            00316 STACK_SIZE equ 16 ; size of argument stack
                      00317 #define T INDF0 ; top of argument stack
                      00318 #define SP FSR0 ; use FSR0 as stack pointer 
                      00319 ; push WREG on T
                      00320 pushw  macro
                      00321     movwi --SP
                      00322     endm
                      00323   
                      00324 ; pop WREG from T
                      00325 popw macro
                      00326     moviw SP++
                      00327     endm
                      00328     
                      00329 ; swap WREG with 
                      00330 swapw  macro
                      00331     xorwf T
                      00332     xorwf T,W
                      00333     xorwf T
                      00334     endm
                      00335 
                      00336 ; drop n elements from stack
                      00337 dropn macro n
                      00338     addfsr T,n
                      00339     endm
                      00340 
                      00341 ; copy nth element of stack to WREG
                      00342 ;  n {0..31}    
                      00343 pickn macro n
                      00344     moviw n[SP]
                      00345     endm
                      00346    
                      00347 ; copy WREG to nth element of stack
                      00348 ; n {0..31}
                      00349 pokew macro n
                      00350     movwi n[SP]
                      00351     endm
                      00352     
                      00353     
                      00354 ;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00355 ;;    variables
                      00356 ;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00357     
                      00358     udata 0x20
0020                  00359 stack res 16 ; arguments stack
0030                  00360 seed res 4 ; prng seed
                      00361  
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00362 v_array   udata 0xA0
00A0                  00363 row1 res 1; brick wall row1
00A1                  00364 row2 res 1
00A2                  00365 row3 res 1
00A3                  00366 row4 res 1
00A4                  00367 row5 res 1
00A5                  00368 d1 res 1 ; score msd digit pixels
00A6                  00369 d2 res 1 ; score 2nd digit pixels
00A7                  00370 d3 res 1 ; score lsd digit pixels
00A8                  00371 balls res 1 ; number of recking balls available 
00A9                  00372 sound_timer res 1 ; duration in multiple of 16.7msec. 
                      00373   
                      00374     udata_shr
0000                  00375 flags  res 1 ; boolean variables
0001                  00376 lcount res 1 ; video field line counter
0002                  00377 slice res 1 ; task slice counter, a task may use more than one slice.
0003                  00378 task res 1 ; where in video phase 
0004                  00379 temp res 1 ; temporary storage
0005                  00380 temp2 res 1 ; 
0006                  00381 paddle_pos res 1 
0007                  00382 ball_x res 1
0008                  00383 ball_y res 1
0009                  00384 ball_dx res 1
000A                  00385 ball_dy res 1
000B                  00386 ball_speed res 1
000C                  00387 score res 2 ; score stored in Binary Coded Decimal
000E                  00388 ball_timer res 1 
                      00389 ;heading res 1 ; ball direction:0=N,2=NW,3=NE,4=S,6=SW,7=SE 
                      00390  
                      00391 ;; code 
                      00392 RES_VECT  CODE    0x0000            ; processor reset vector
0000   2???           00393     GOTO    START                   ; go to beginning of program
0001   0001           00394     reset
0002   0001           00395     reset
0003   0001           00396     reset
                      00397 
                      00398 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    
                      00399 ; interrupt service routine triggered by PWM3 period rollover
                      00400 ISR CODE 0x0004
0004                  00401 isr
0004   1900           00402     btfsc flags, F_SYNC
0005   2???           00403     goto task_switch
                      00404  ; chroma sync
                      00405     tdelay 30
  000A                    M     variable q=(30)/3
  0000                    M     variable r=(30)%3
                          M     if (q)
0006   300A               M     movlw q
0007   0B89               M     decfsz WREG
0008   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0009   0021           00406     banksel TRISA
000A   108C           00407     bcf TRISA,CHROMA
                      00408     tdelay 16
  0005                    M     variable q=(16)/3
  0001                    M     variable r=(16)%3
                          M     if (q)
000B   3005               M     movlw q
000C   0B89               M     decfsz WREG
000D   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
000E   0000               M     nop
                          M     endif
000F   148C           00409     bsf TRISA,CHROMA
                      00410     porch_on
0010   0024               M     banksel WPUA
0011   160C               M     bsf WPUA,VIDEO_OUT
0012                  00411 task_switch ; horizontal scan line used as round robin task scheduler   
0012   08??           00412     movfw task
0013   000B           00413     brw
0014   2???           00414     goto pre_vsync ;task 0, vertical pre-equalization pulses
0015   2???           00415     goto vsync ;task 1, vertical sync pulses
0016   2???           00416     goto post_vsync ;task 2, vertical post-equalization pulses
0017   2???           00417     goto vsync_end ;task 3, return to normal video line
0018   2???           00418     goto sound ;task 4, check sound timer expiration
0019   2???           00419     goto user_input ;task 5,  read button and paddle
001A   2???           00420     goto move_ball ;task 6, move recking ball.
001B   2???           00421     goto collision ; task 7, check for collision with brick wall and paddle
001C   2???           00422     goto video_first ; task 8, wait FIRST_VIDEO line.
001D   2???           00423     goto draw_score ;task 9,  draw score en ball count
001E   2???           00424     goto draw_top_wall ;task 10,  draw top wall
001F   2???           00425     goto draw_void ;task 11, draw play space
0020   2???           00426     goto draw_row1 ;task 12, draw top bricks row
0021   2???           00427     goto draw_row2 ;task 13, draw second bricks row
0022   2???           00428     goto draw_row3 ;task 14,  draw third bricks row
0023   2???           00429     goto draw_row4 ;task 15,  draw fourth bricks row
0024   2???           00430     goto draw_row5 ;task 16, draw fifth bricks row
0025   2???           00431     goto draw_empty;task 17, draw empty space down to bottom
0026   2???           00432     goto draw_paddle ;task 18, draw paddle
0027   2???           00433     goto wait_field_end ;task 19, idle to end of video field
0028   0001           00434     reset ; error trap, task out of range
0029                  00435 isr_exit  
                      00436     porch_off
0029   0024               M     banksel WPUA
002A   120C               M     bcf WPUA,VIDEO_OUT
002B   003B           00437     banksel PWM3INTF
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

002C   103D           00438     bcf PWM3INTF,PRIF
002D   0009           00439     retfie
                      00440 
                      00441 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00442 ;;  all tasks routine are here            ;;
                      00443 ;;  each must be terminate by leave macro ;;    
                      00444 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00445     
                      00446 ; task 0, vertical synchronization pre equalization
002E                  00447 pre_vsync
002E   08??           00448     movfw slice
002F   1903           00449     skpnz
0030   2???           00450     goto set_presync
                      00451     next_task 6
0031   0A??               M     incf slice
0032   3006               M     movlw 6
0033   02??               M     subwf slice,W
0034   1D03               M     skpz
                          M     leave
0035   2???               M     goto isr_exit
0036   01??               M     clrf slice
0037   0A??               M     incf task
0038   3006               M     movlw 6
0039   07??               M     addwf lcount
                          M     leave
003A   2???               M     goto isr_exit
003B                  00452 set_presync    
003B   003B           00453     banksel PWM3DC
003C   3041           00454     movlw HEQUAL
003D   00B3           00455     movwf PWM3DCL
003E   01B4           00456     clrf PWM3DCH
003F   3003           00457     movlw high HALF_LINE
0040   00B6           00458     movwf PWM3PRH
0041   308D           00459     movlw low HALF_LINE
0042   00B5           00460     movwf PWM3PRL
0043   17BF           00461     bsf PWM3LDCON,7
0044   0A??           00462     incf slice
                      00463     leave
0045   2???               M     goto isr_exit
                      00464     
                      00465 ; task 1, vertical synchronization pulses
0046                  00466 vsync 
0046   08??           00467     movfw slice
0047   1903           00468     skpnz
0048   2???           00469     goto set_vsync
                      00470     next_task 6
0049   0A??               M     incf slice
004A   3006               M     movlw 6
004B   02??               M     subwf slice,W
004C   1D03               M     skpz
                          M     leave
004D   2???               M     goto isr_exit
004E   01??               M     clrf slice
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

004F   0A??               M     incf task
0050   3006               M     movlw 6
0051   07??               M     addwf lcount
                          M     leave
0052   2???               M     goto isr_exit
0053                  00471 set_vsync
0053   003B           00472     banksel PWM3DC
0054   3008           00473     movlw low VSYNC_PULSE
0055   00B3           00474     movwf PWM3DCL
0056   3003           00475     movlw high VSYNC_PULSE
0057   00B4           00476     movwf PWM3DCH
0058   17BF           00477     bsf PWM3LDCON,7
0059   0A??           00478     incf slice
                      00479     leave
005A   2???               M     goto isr_exit
                      00480     
                      00481 ; task 2, vertical synchronisation post equalization pulses
005B                  00482 post_vsync
005B   08??           00483     movfw slice
005C   1903           00484     skpnz
005D   2???           00485     goto set_presync
005E   3006           00486     movlw 6
005F   02??           00487     subwf slice,W
0060   1903           00488     skpnz
0061   2???           00489     goto post_last
0062   0A??           00490     incf slice
                      00491     leave
0063   2???               M     goto isr_exit
0064                  00492 post_last    
0064   0A??           00493     incf task
0065   01??           00494     clrf slice
0066   1C80           00495     btfss flags, F_EVEN
                      00496     leave
0067   2???               M     goto isr_exit
                      00497     
                      00498 ; task 3, vertical synchronization completed, return to normal line
0068                  00499 vsync_end
0068   1100           00500     bcf flags, F_SYNC
0069   003B           00501     banksel PWM3DC
006A   3086           00502     movlw HSYNC
006B   00B3           00503     movwf PWM3DCL
006C   01B4           00504     clrf PWM3DCH
006D   3007           00505     movlw high HPERIOD
006E   00B6           00506     movwf PWM3PRH
006F   301B           00507     movlw low HPERIOD
0070   00B5           00508     movwf PWM3PRL
0071   17BF           00509     bsf PWM3LDCON,7
0072   0A??           00510     incf task
0073   3009           00511     movlw 9
0074   00??           00512     movwf lcount
                      00513     leave
0075   2???               M     goto isr_exit
                      00514 
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00515 ; task 4,  sound timer
0076                  00516 sound
0076   0A??           00517     incf task
0077   0A??           00518     incf lcount
0078   1D80           00519     btfss flags, F_SOUND
                      00520     leave
0079   2???               M     goto isr_exit
007A   002?           00521     banksel sound_timer
007B   0B??           00522     decfsz sound_timer
                      00523     leave
007C   2???               M     goto isr_exit
007D   1180           00524     bcf flags, F_SOUND
007E   003B           00525     banksel PWM2CON
007F   132B           00526     bcf PWM2CON,OE
0080   13AB           00527     bcf PWM2CON,EN
                      00528     leave
0081   2???               M     goto isr_exit
                      00529    
0082                  00530 pong
0082   1580           00531     bsf flags, F_SOUND
0083   003B           00532     banksel PWM2CON
0084   172B           00533     bsf PWM2CON,OE
0085   17AB           00534     bsf PWM2CON,EN
0086   3001           00535     movlw 1
0087   00??           00536     movwf sound_timer
0088   0008           00537     return
                      00538     
                      00539 ;task 5, read button and paddle position
0089                  00540 user_input
0089   0A??           00541     incf task
008A   0A??           00542     incf lcount
008B   2???           00543     call read_paddle
008C   1A00           00544     btfsc flags,F_START
008D   3???           00545     bra game_running
                      00546 ; game not running
008E   2???           00547     call read_button
008F   1D03           00548     skpz
0090   3???           00549     bra skip_2_tasks
                      00550 ; start game    
0091   2???           00551     call game_init
                      00552     leave
0092   2???               M     goto isr_exit
0093                  00553 game_running
0093   1E80           00554     btfss flags, F_PAUSE
                      00555     leave
0094   2???               M     goto isr_exit
                      00556 ; game on pause    
0095                  00557 wait_trigger
0095   2???           00558     call read_button
0096   1D03           00559     skpz
0097   3???           00560     bra skip_2_tasks
0098   1280           00561     bcf flags,F_PAUSE
0099   2???           00562     call set_ball_dx
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00563     leave
009A   2???               M     goto isr_exit
                      00564 ; while game not running skip 'move_ball' and 'collision' tasks    
009B                  00565 skip_2_tasks
009B   08??           00566     movfw paddle_pos
009C   3E04           00567     addlw 4
009D   00??           00568     movwf ball_x
009E   0A??           00569     incf task
009F   0A??           00570     incf task
00A0   2???           00571     call lfsr_rand
                      00572     leave
00A1   2???               M     goto isr_exit
                      00573 
00A2                  00574 read_button
00A2   0020           00575     banksel PORTA
00A3   080C           00576     movfw PORTA
00A4   3908           00577     andlw 1<<START_BTN
00A5   0008           00578     return
                      00579     
00A6                  00580 read_paddle
00A6   003B           00581     banksel PWM2CON
00A7   132B           00582     bcf PWM2CON,OE
00A8   0021           00583     banksel TRISA
00A9   140C           00584     bsf TRISA, PADDLE
00AA   0021           00585     banksel ADCON0
00AB   3003           00586     movlw 3
00AC   009D           00587     movwf ADCON0
00AD   189D           00588     btfsc ADCON0,NOT_DONE
00AE   2???           00589     goto $-1
00AF   3010           00590     movlw 4<<CHS0
00B0   009D           00591     movwf ADCON0
00B1   081C           00592     movfw ADRESH
00B2   003B           00593     banksel PWM2CON
00B3   172B           00594     bsf PWM2CON,OE
00B4   00??           00595     movwf paddle_pos
00B5   304A           00596     movlw PADDLE_LIMIT
00B6   02??           00597     subwf paddle_pos,W
00B7   1C03           00598     skpc
00B8   3???           00599     bra $+3
00B9   304A           00600     movlw PADDLE_LIMIT
00BA   00??           00601     movwf paddle_pos
00BB   0021           00602     banksel TRISA
00BC   100C           00603     bcf TRISA, AUDIO
00BD   0008           00604     return
                      00605     
                      00606    
                      00607 ; task 6, move recking ball.   
00BE                  00608 move_ball
00BE   0B??           00609     decfsz ball_timer
00BF   3???           00610     bra move_ball_exit
00C0   08??           00611     movfw ball_speed
00C1   00??           00612     movwf ball_timer
00C2   08??           00613     movfw ball_dx
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00C3   07??           00614     addwf ball_x
00C4   1D03           00615     skpz
00C5   3???           00616     bra right_bound
00C6   0A??           00617     incf ball_x
00C7   09??           00618     comf ball_dx
00C8   0A??           00619     incf ball_dx
00C9   3???           00620     bra move_y
00CA                  00621 right_bound    
00CA   08??           00622     movfw ball_x
00CB   3C52           00623     sublw BALL_RIGHT_BOUND
00CC   1803           00624     skpnc
00CD   3???           00625     bra move_y
00CE   03??           00626     decf ball_x
00CF   09??           00627     comf ball_dx
00D0   0A??           00628     incf ball_dx
00D1                  00629 move_y
00D1   08??           00630     movfw ball_dy
00D2   07??           00631     addwf ball_y
00D3   303A           00632     movlw BALL_TOP_BOUND
00D4   02??           00633     subwf ball_y,W
00D5   1803           00634     skpnc
00D6   3???           00635     bra bottom_bound
00D7   09??           00636     comf ball_dy
00D8   0A??           00637     incf ball_dy
00D9   3???           00638     bra move_ball_exit
00DA                  00639 bottom_bound
00DA   08??           00640     movfw ball_y
00DB   3CFA           00641     sublw BALL_BOTTOM_BOUND
00DC   1803           00642     skpnc
00DD   3???           00643     bra move_ball_exit
00DE   09??           00644     comf ball_dy
00DF   0A??           00645     incf ball_dy
00E0                  00646 move_ball_exit    
00E0   0A??           00647     incf task
00E1   0A??           00648     incf lcount
                      00649     leave
00E2   2???               M     goto isr_exit
                      00650 
                      00651 ; task 7, collision detection
00E3                  00652 collision
00E3   002?           00653     banksel row1
                      00654 ; pre-compute x column (brick bit mask)    
                      00655 ; column = 7-(3*ball_x/32)
00E4   35??           00656     lslf ball_x,W
00E5   07??           00657     addwf ball_x,W
                      00658     pushw
00E6   0019               M     movwi --SP
00E7   3689           00659     lsrf WREG
00E8   0E89           00660     swapf WREG
00E9   390F           00661     andlw 15
00EA   3C07           00662     sublw 7
                      00663 ; create mask    
00EB   00??           00664     movwf temp
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00EC   3001           00665     movlw 1
                      00666     pushw
00ED   0019               M     movwi --SP
00EE   08??           00667     movfw temp
00EF   1903           00668     skpnz
00F0   3???           00669     bra $+4
00F1   3580           00670     lslf T
00F2   0B89           00671     decfsz WREG
00F3   3???           00672     bra $-2
                      00673 ; ball/paddle test
00F4   30EC           00674     movlw PADDLE_Y-BALL_HEIGHT+1
                      00675     pushw
00F5   0019               M     movwi --SP
00F6   30FB           00676     movlw PADDLE_Y+PADDLE_THICKNESS
                      00677     pushw
00F7   0019               M     movwi --SP
00F8   08??           00678     movfw ball_y
00F9   2???           00679     call between
00FA   1803           00680     skpnc
00FB   3???           00681     bra check_paddle_bounce
00FC   08??           00682     movfw ball_y
00FD   3CF3           00683     sublw PADDLE_Y
00FE   1C03           00684     skpc
00FF   3???           00685     bra ball_lost
0100   3???           00686     bra row1_coll
0101                  00687 ball_lost    
0101   1680           00688     bsf flags, F_PAUSE ; pause game
0102   0B??           00689     decfsz balls
0103   3???           00690     bra $+2
0104   1200           00691     bcf flags, F_START
0105   3004           00692     movlw 4
0106   07??           00693     addwf paddle_pos,W
0107   00??           00694     movwf ball_x
0108   30EB           00695     movlw PADDLE_Y-BRICK_HEIGHT
0109   00??           00696     movwf ball_y
010A   30FC           00697     movlw -4
010B   00??           00698     movwf ball_dy
010C   3???           00699     bra collision_exit
                      00700 ; if ball_x over paddle bounce ball
010D                  00701 check_paddle_bounce
010D   08??           00702     movfw paddle_pos
                      00703     pushw
010E   0019               M     movwi --SP
010F   3008           00704     movlw (PADDLE_WIDTH-BALL_WIDTH)/3
0110   07??           00705     addwf paddle_pos,W
                      00706     pushw
0111   0019               M     movwi --SP
0112   08??           00707     movfw ball_x
0113   2???           00708     call between
0114   1C03           00709     skpc
0115   3???           00710     bra collision_exit
0116   30FC           00711     movlw -4
0117   00??           00712     movwf ball_dy
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0118   2???           00713     call set_ball_dx
0119   2???           00714     call pong
011A   3???           00715     bra collision_exit
                      00716 ; row1 collision?    
011B                  00717 row1_coll    
011B   3043           00718     movlw ROW1_Y-BRICK_HEIGHT+1
                      00719     pushw
011C   0019               M     movwi --SP
011D   3052           00720     movlw ROW1_Y+BRICK_HEIGHT
                      00721     pushw
011E   0019               M     movwi --SP
011F   08??           00722     movfw ball_y
0120   2???           00723     call between
0121   1C03           00724     skpc
0122   3???           00725     bra row2_coll
                      00726 ; ball inside row1 bounds
0123   0800           00727     movfw T
0124   05??           00728     andwf row1, W
0125   1903           00729     skpnz
0126   3???           00730     bra collision_exit
0127   0900           00731     comf T,W
0128   05??           00732     andwf row1
0129   3009           00733     movlw 9
012A   2???           00734     call inc_score
012B   3???           00735     bra brick_bounce
                      00736 ; row2 collision?    
012C                  00737 row2_coll
012C   304B           00738     movlw ROW2_Y-BRICK_HEIGHT+1
                      00739     pushw
012D   0019               M     movwi --SP
012E   305A           00740     movlw ROW2_Y+BRICK_HEIGHT
                      00741     pushw
012F   0019               M     movwi --SP
0130   08??           00742     movfw ball_y
0131   2???           00743     call between
0132   1C03           00744     skpc
0133   3???           00745     bra row3_coll
0134   0800           00746     movfw T
0135   05??           00747     andwf row2, W
0136   1903           00748     skpnz
0137   3???           00749     bra collision_exit
0138   0900           00750     comf T,W
0139   05??           00751     andwf row2
013A   3006           00752     movlw 6
013B   2???           00753     call inc_score
013C   3???           00754     bra brick_bounce
                      00755 ; row3 collision?    
013D                  00756 row3_coll
013D   3053           00757     movlw ROW3_Y-BRICK_HEIGHT+1
                      00758     pushw
013E   0019               M     movwi --SP
013F   3062           00759     movlw ROW3_Y+BRICK_HEIGHT
                      00760     pushw
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0140   0019               M     movwi --SP
0141   08??           00761     movfw ball_y
0142   2???           00762     call between
0143   1C03           00763     skpc
0144   3???           00764     bra row4_coll
0145   0800           00765     movfw T
0146   05??           00766     andwf row3,W
0147   1903           00767     skpnz
0148   3???           00768     bra collision_exit
0149   0900           00769     comf T,W
014A   05??           00770     andwf row3
014B   3003           00771     movlw 3
014C   2???           00772     call inc_score
014D   3???           00773     bra brick_bounce
                      00774 ; row4 collision?    
014E                  00775 row4_coll
014E   305B           00776     movlw ROW4_Y-BRICK_HEIGHT+1
                      00777     pushw
014F   0019               M     movwi --SP
0150   306A           00778     movlw ROW4_Y+BRICK_HEIGHT
                      00779     pushw
0151   0019               M     movwi --SP
0152   08??           00780     movfw ball_y
0153   2???           00781     call between
0154   1C03           00782     skpc
0155   3???           00783     bra row5_coll
0156   0800           00784     movfw T
0157   05??           00785     andwf row4,W
0158   1903           00786     skpnz
0159   3???           00787     bra collision_exit
015A   0900           00788     comf T,W
015B   05??           00789     andwf row4
015C   3002           00790     movlw 2
015D   2???           00791     call inc_score
015E   3???           00792     bra brick_bounce
                      00793 ; row5 collision?    
015F                  00794 row5_coll    
015F   3063           00795     movlw ROW5_Y-BRICK_HEIGHT+1
                      00796     pushw
0160   0019               M     movwi --SP
0161   3072           00797     movlw ROW5_Y+BRICK_HEIGHT
                      00798     pushw
0162   0019               M     movwi --SP
0163   08??           00799     movfw ball_y
0164   2???           00800     call between
0165   1C03           00801     skpc
0166   3???           00802     bra collision_exit
0167   0800           00803     movfw T
0168   05??           00804     andwf row5,W
0169   1903           00805     skpnz
016A   3???           00806     bra collision_exit
016B   0900           00807     comf T,W
016C   05??           00808     andwf row5
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

016D   3001           00809     movlw 1
016E   2???           00810     call inc_score
016F                  00811 brick_bounce
016F   09??           00812     comf ball_dy
0170   0A??           00813     incf ball_dy
0171   2???           00814     call set_ball_dx
0172                  00815 collision_exit
                      00816     dropn 2
0172   3102               M     addfsr T,2
0173   0A??           00817     incf task
0174   0A??           00818     incf lcount
                      00819     leave
0175   2???               M     goto isr_exit
                      00820 
                      00821 ; check if  lb <= x < hb
                      00822 ; input:
                      00823 ;    WREG  x
                      00824 ;    stack ( lb hb -- )     
                      00825 ; output:
                      00826 ;   Carry bit set if true    
0176                  00827 between
0176   00??           00828     movwf temp
                      00829     pickn 1
0177   3F01               M     moviw 1[SP]
0178   02??           00830     subwf temp,W
0179   1C03           00831     skpc
017A   3???           00832     bra between_exit
017B   0800           00833     movfw T
017C   02??           00834     subwf temp
017D   0803           00835     movfw STATUS
017E   3A01           00836     xorlw 1
017F   0083           00837     movwf STATUS
0180                  00838 between_exit    
                      00839     dropn 2
0180   3102               M     addfsr T,2
0181   0008           00840     return
                      00841     
                      00842 ; task 8, wait for first video line
0182                  00843 video_first
0182   0A??           00844     incf lcount
0183   301E           00845     movlw FIRST_VIDEO_LINE
0184   02??           00846     subwf lcount,W
0185   1D03           00847     skpz
                      00848     leave
0186   2???               M     goto isr_exit
0187   01??           00849     clrf slice
0188   0A??           00850     incf task
                      00851     leave
0189   2???               M     goto isr_exit
                      00852    
                      00853 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00854 ; The following tasks are responsible to render video display.
                      00855 ; Each video line must be completed by setting color to black.
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00856 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00857     
                      00858  
                      00859 ; task 9, draw score en ball count
018A                  00860 draw_score ; lcount enter at 30 leave at 50
018A   0021           00861     banksel TRISA
018B   08??           00862     movfw slice
018C   3689           00863     lsrf WREG
018D   3689           00864     lsrf WREG
                      00865     pushw
018E   0019               M     movwi --SP
018F   300F           00866     movlw 0xf
0190   05??           00867     andwf score+1,W
0191   2???           00868     call digit_offset
0192   0700           00869     addwf T,W
0193   2???           00870     call digits
0194   00??           00871     movwf d3
0195   0E??           00872     swapf score+1,W
0196   390F           00873     andlw 0xf
0197   2???           00874     call digit_offset
0198   0700           00875     addwf T,W
0199   2???           00876     call digits
019A   00??           00877     movwf d2
019B   300F           00878     movlw 0xf
019C   05??           00879     andwf score,W
019D   2???           00880     call digit_offset
019E   0700           00881     addwf T,W
019F   2???           00882     call digits
01A0   2???           00883     call digit_row
01A1   08??           00884     movfw d2
01A2   2???           00885     call digit_row
01A3   08??           00886     movfw d3
01A4   2???           00887     call digit_row
                      00888     tdelay 60
  0014                    M     variable q=(60)/3
  0000                    M     variable r=(60)%3
                          M     if (q)
01A5   3014               M     movlw q
01A6   0B89               M     decfsz WREG
01A7   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
01A8   120C           00889     bcf TRISA,VIDEO_OUT
                      00890     tdelay 5
  0001                    M     variable q=(5)/3
  0002                    M     variable r=(5)%3
                          M     if (q)
01A9   3001               M     movlw q
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01AA   0B89               M     decfsz WREG
01AB   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
01AC   2???               M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
01AD   160C           00891     bsf TRISA,VIDEO_OUT
                      00892     tdelay 30
  000A                    M     variable q=(30)/3
  0000                    M     variable r=(30)%3
                          M     if (q)
01AE   300A               M     movlw q
01AF   0B89               M     decfsz WREG
01B0   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
01B1   08??           00893     movfw balls
01B2   2???           00894     call digit_offset
01B3   0700           00895     addwf T,W
01B4   2???           00896     call digits
01B5   2???           00897     call digit_row
01B6                  00898 score_exit
                      00899     next_task 5*4
01B6   0A??               M     incf slice
01B7   3014               M     movlw 5*4
01B8   02??               M     subwf slice,W
01B9   1D03               M     skpz
                          M     leave
01BA   2???               M     goto isr_exit
01BB   01??               M     clrf slice
01BC   0A??               M     incf task
01BD   3014               M     movlw 5*4
01BE   07??               M     addwf lcount
                          M     leave
01BF   2???               M     goto isr_exit
                      00900 
  00000002            00901 digit_version equ 2
                      00902 ; display digit row    
01C0                  00903 digit_row
                      00904  if digit_version==1
                      00905     rlf WREG
                      00906     skpnc
                      00907     bcf TRISA,VIDEO_OUT
                      00908     rlf WREG
                      00909     bra $+1
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00910     bsf TRISA,VIDEO_OUT
                      00911     skpnc
                      00912     bcf TRISA,VIDEO_OUT
                      00913     rlf WREG
                      00914     bra $+1
                      00915     bsf TRISA,VIDEO_OUT
                      00916     skpnc
                      00917     bcf TRISA,VIDEO_OUT
                      00918     nop
                      00919     bra $+1
                      00920     bsf TRISA,VIDEO_OUT
                      00921  else
01C0   0D89           00922     rlf WREG
01C1   1803           00923     skpnc
01C2   120C           00924     bcf TRISA,VIDEO_OUT
01C3   1C03           00925     skpc
01C4   160C           00926     bsf TRISA,VIDEO_OUT
01C5   0D89           00927     rlf WREG
01C6   1803           00928     skpnc
01C7   120C           00929     bcf TRISA,VIDEO_OUT
01C8   1C03           00930     skpc
01C9   160C           00931     bsf TRISA,VIDEO_OUT
01CA   0D89           00932     rlf WREG
01CB   1803           00933     skpnc
01CC   120C           00934     bcf TRISA,VIDEO_OUT
01CD   1C03           00935     skpc
01CE   160C           00936     bsf TRISA,VIDEO_OUT
01CF   3???           00937     bra $+1
01D0   3???           00938     bra $+1
01D1   160C           00939     bsf TRISA,VIDEO_OUT
                      00940  endif
01D2   0008           00941     return
                      00942     
                      00943 ; task 10,  draw top wall, 8 screen lines    
01D3                  00944 draw_top_wall ;lcount enter at 50 leave at 58
01D3   1C80           00945     btfss flags, F_EVEN
01D4   3???           00946     bra top_wall_exit
01D5   0021           00947     banksel TRISA
                      00948     tdelay LEFT_MARGIN -2
  0010                    M     variable q=(LEFT_MARGIN -2)/3
  0002                    M     variable r=(LEFT_MARGIN -2)%3
                          M     if (q)
01D6   3010               M     movlw q
01D7   0B89               M     decfsz WREG
01D8   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
01D9   2???               M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      00949     white
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;    banksel TRISA
01DA   148C               M     bsf TRISA,CHROMA
01DB   120C               M     bcf TRISA,VIDEO_OUT
                          M ;    goto $+1
                      00950     tdelay COURT_WIDTH+3*BORDER_WIDTH+1
  0057                    M     variable q=(COURT_WIDTH+3*BORDER_WIDTH+1)/3
  0000                    M     variable r=(COURT_WIDTH+3*BORDER_WIDTH+1)%3
                          M     if (q)
01DC   3057               M     movlw q
01DD   0B89               M     decfsz WREG
01DE   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      00951     black
                          M ;    banksel TRISA
01DF   148C               M     bsf TRISA,CHROMA
01E0   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
01E1                  00952 top_wall_exit
                      00953     next_task BRICK_HEIGHT
01E1   0A??               M     incf slice
01E2   3008               M     movlw BRICK_HEIGHT
01E3   02??               M     subwf slice,W
01E4   1D03               M     skpz
                          M     leave
01E5   2???               M     goto isr_exit
01E6   01??               M     clrf slice
01E7   0A??               M     incf task
01E8   3008               M     movlw BRICK_HEIGHT
01E9   07??               M     addwf lcount
                          M     leave
01EA   2???               M     goto isr_exit
                      00954 
                      00955 ; task 11,  only on even field draw vertical side bands.    
01EB                  00956 draw_void ;enter at 58 leave at 74| 255-58
01EB   1C80           00957     btfss flags, F_EVEN
01EC   3???           00958     bra no_wall_draw
01ED   08??           00959     movfw ball_y
01EE   02??           00960     subwf lcount,W
01EF   1C03           00961     skpc
01F0   3???           00962     bra no_ball_dly
01F1   3008           00963     movlw BALL_HEIGHT
01F2   07??           00964     addwf ball_y,W
01F3   02??           00965     subwf lcount,W
01F4   1C03           00966     skpc
01F5   3???           00967     bra yes_ball
01F6   3???           00968     bra no_ball
01F7                  00969 no_ball_dly
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00970     tdelay 6
  0002                    M     variable q=(6)/3
  0000                    M     variable r=(6)%3
                          M     if (q)
01F7   3002               M     movlw q
01F8   0B89               M     decfsz WREG
01F9   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
01FA                  00971 no_ball    
                      00972     tdelay LEFT_MARGIN-13
  000D                    M     variable q=(LEFT_MARGIN-13)/3
  0000                    M     variable r=(LEFT_MARGIN-13)%3
                          M     if (q)
01FA   300D               M     movlw q
01FB   0B89               M     decfsz WREG
01FC   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      00973     draw_border BORDER_WIDTH
01FD   0021               M     banksel TRISA
01FE   148C               M     bsf TRISA,CHROMA
01FF   120C               M     bcf TRISA,VIDEO_OUT
                          M     tdelay BORDER_WIDTH
  0001                    M     variable q=(BORDER_WIDTH)/3
  0001                    M     variable r=(BORDER_WIDTH)%3
                          M     if (q)
0200   3001               M     movlw q
0201   0B89               M     decfsz WREG
0202   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
0203   0000               M     nop
                          M     endif
0204   160C               M     bsf TRISA,VIDEO_OUT
                      00974     black
                          M ;    banksel TRISA
0205   148C               M     bsf TRISA,CHROMA
0206   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00975     tdelay COURT_WIDTH
  0052                    M     variable q=(COURT_WIDTH)/3
  0002                    M     variable r=(COURT_WIDTH)%3
                          M     if (q)
0207   3052               M     movlw q
0208   0B89               M     decfsz WREG
0209   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
020A   2???               M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      00976     draw_border BORDER_WIDTH
020B   0021               M     banksel TRISA
020C   148C               M     bsf TRISA,CHROMA
020D   120C               M     bcf TRISA,VIDEO_OUT
                          M     tdelay BORDER_WIDTH
  0001                    M     variable q=(BORDER_WIDTH)/3
  0001                    M     variable r=(BORDER_WIDTH)%3
                          M     if (q)
020E   3001               M     movlw q
020F   0B89               M     decfsz WREG
0210   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
0211   0000               M     nop
                          M     endif
0212   160C               M     bsf TRISA,VIDEO_OUT
0213   3???           00977     bra draw_void_exit
0214                  00978 yes_ball
0214   0021           00979     banksel TRISA
0215   08??           00980     movfw ball_x
0216   1903           00981     skpnz
0217   3???           00982     bra ball_at_left
0218   3C52           00983     sublw BALL_RIGHT_BOUND
0219   1903           00984     skpnz
021A   3???           00985     bra ball_at_right
021B                  00986 ball_in_middle    
021B   3001           00987     movlw 1
021C   02??           00988     subwf ball_x,W
021D   1903           00989     skpnz
021E   3E01           00990     addlw 1
021F   00??           00991     movwf temp
                      00992     tdelay LEFT_MARGIN-22
  000A                    M     variable q=(LEFT_MARGIN-22)/3
  0000                    M     variable r=(LEFT_MARGIN-22)%3
                          M     if (q)
0220   300A               M     movlw q
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0221   0B89               M     decfsz WREG
0222   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0223   120C           00993     bcf TRISA,VIDEO_OUT
                      00994     tdelay 3
  0001                    M     variable q=(3)/3
  0000                    M     variable r=(3)%3
                          M     if (q)
0224   3001               M     movlw q
0225   0B89               M     decfsz WREG
0226   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0227   08??           00995     movfw temp
0228   160C           00996     bsf TRISA,VIDEO_OUT
0229   0B89           00997     decfsz WREG
022A   3???           00998     bra $-1
022B   120C           00999     bcf TRISA, VIDEO_OUT
                      01000     tdelay BALL_WIDTH
  0002                    M     variable q=(BALL_WIDTH)/3
  0002                    M     variable r=(BALL_WIDTH)%3
                          M     if (q)
022C   3002               M     movlw q
022D   0B89               M     decfsz WREG
022E   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
022F   2???               M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0230   160C           01001     bsf TRISA,VIDEO_OUT
0231   08??           01002     movfw ball_x
0232   3C52           01003     sublw BALL_RIGHT_BOUND
0233   0B89           01004     decfsz WREG
0234   3???           01005     bra $-1
0235   120C           01006     bcf TRISA,VIDEO_OUT
                      01007     tdelay 4
  0001                    M     variable q=(4)/3
  0001                    M     variable r=(4)%3
                          M     if (q)
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0236   3001               M     movlw q
0237   0B89               M     decfsz WREG
0238   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
0239   0000               M     nop
                          M     endif
023A   160C           01008     bsf TRISA,VIDEO_OUT
023B   3???           01009     bra draw_void_exit
023C                  01010 ball_at_left
                      01011     tdelay LEFT_MARGIN-15
  000C                    M     variable q=(LEFT_MARGIN-15)/3
  0001                    M     variable r=(LEFT_MARGIN-15)%3
                          M     if (q)
023C   300C               M     movlw q
023D   0B89               M     decfsz WREG
023E   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
023F   0000               M     nop
                          M     endif
0240   120C           01012     bcf TRISA,VIDEO_OUT
                      01013     tdelay 12
  0004                    M     variable q=(12)/3
  0000                    M     variable r=(12)%3
                          M     if (q)
0241   3004               M     movlw q
0242   0B89               M     decfsz WREG
0243   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0244   160C           01014     bsf TRISA,VIDEO_OUT
                      01015     tdelay COURT_WIDTH-6
  0050                    M     variable q=(COURT_WIDTH-6)/3
  0002                    M     variable r=(COURT_WIDTH-6)%3
                          M     if (q)
0245   3050               M     movlw q
0246   0B89               M     decfsz WREG
0247   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
0248   2???               M     goto $+1
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0249   0000           01016     nop
024A   120C           01017     bcf TRISA,VIDEO_OUT
                      01018     tdelay 4
  0001                    M     variable q=(4)/3
  0001                    M     variable r=(4)%3
                          M     if (q)
024B   3001               M     movlw q
024C   0B89               M     decfsz WREG
024D   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
024E   0000               M     nop
                          M     endif
024F   160C           01019     bsf TRISA,VIDEO_OUT
0250   3???           01020     bra draw_void_exit
0251                  01021 ball_at_right
                      01022     tdelay LEFT_MARGIN-18
  000B                    M     variable q=(LEFT_MARGIN-18)/3
  0001                    M     variable r=(LEFT_MARGIN-18)%3
                          M     if (q)
0251   300B               M     movlw q
0252   0B89               M     decfsz WREG
0253   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
0254   0000               M     nop
                          M     endif
0255   120C           01023     bcf TRISA,VIDEO_OUT
                      01024     tdelay 4
  0001                    M     variable q=(4)/3
  0001                    M     variable r=(4)%3
                          M     if (q)
0256   3001               M     movlw q
0257   0B89               M     decfsz WREG
0258   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
0259   0000               M     nop
                          M     endif
025A   160C           01025     bsf TRISA,VIDEO_OUT
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01026     tdelay COURT_WIDTH
  0052                    M     variable q=(COURT_WIDTH)/3
  0002                    M     variable r=(COURT_WIDTH)%3
                          M     if (q)
025B   3052               M     movlw q
025C   0B89               M     decfsz WREG
025D   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
025E   2???               M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
025F   0000           01027     nop
0260   120C           01028     bcf TRISA,VIDEO_OUT
                      01029     tdelay 12
  0004                    M     variable q=(12)/3
  0000                    M     variable r=(12)%3
                          M     if (q)
0261   3004               M     movlw q
0262   0B89               M     decfsz WREG
0263   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0264   160C           01030     bsf TRISA,VIDEO_OUT
0265                  01031 draw_void_exit    
0265   0A??           01032     incf slice
0266   0A??           01033     incf lcount
0267   30FB           01034     movlw LAST_VIDEO_LINE+1
0268   02??           01035     subwf lcount,W
0269   1D03           01036     skpz
                      01037     leave
026A   2???               M     goto isr_exit
026B   01??           01038     clrf slice
026C   3013           01039     movlw 19
026D   00??           01040     movwf task
                      01041     leave
026E   2???               M     goto isr_exit
026F                  01042 no_wall_draw
                      01043     next_task 2*BRICK_HEIGHT
026F   0A??               M     incf slice
0270   3010               M     movlw 2*BRICK_HEIGHT
0271   02??               M     subwf slice,W
0272   1D03               M     skpz
                          M     leave
0273   2???               M     goto isr_exit
0274   01??               M     clrf slice
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0275   0A??               M     incf task
0276   3010               M     movlw 2*BRICK_HEIGHT
0277   07??               M     addwf lcount
                          M     leave
0278   2???               M     goto isr_exit
                      01044     
                      01045 ; task 12, draw top brick row
0279                  01046 draw_row1 ; lcount enter at 74 leave at 82
                      01047     chroma_ref
0279   003B               M     banksel PWM1CON
027A   121B               M     bcf PWM1CON,POL
027B   0021           01048     banksel TRISA
027C   08??           01049     movfw row1
027D   00??           01050     movwf temp
                      01051     tdelay LEFT_MARGIN-3
  0010                    M     variable q=(LEFT_MARGIN-3)/3
  0001                    M     variable r=(LEFT_MARGIN-3)%3
                          M     if (q)
027E   3010               M     movlw q
027F   0B89               M     decfsz WREG
0280   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
0281   0000               M     nop
                          M     endif
                      01052 ;    draw_border BORDER_WIDTH
                      01053     draw_wall mauve
  0000                    M     local next_brick
0282   3008               M     movlw 8
                          M     pushw
0283   0019               M     movwi --SP
0284                      M next_brick    
0284   35??               M     lslf temp
                          M     draw_brick mauve
  0000                    M     local no_brick
  0000                    M     local brick_delay
0285   1C03               M     skpc
0286   3???               M     bra no_brick
                          M     mauve
                          M ;    chroma_ref
                          M ;    banksel TRISA
0287   120C               M     bcf TRISA,VIDEO_OUT
0288   108C               M     bcf TRISA,CHROMA
0289   0000               M     nop
028A   3???               M     bra brick_delay
028B                      M no_brick
                          M     black
                          M ;    banksel TRISA
028B   148C               M     bsf TRISA,CHROMA
028C   160C               M     bsf TRISA,VIDEO_OUT
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;    goto $+1
028D   3???               M     bra brick_delay 
028E                      M brick_delay    
                          M     tdelay BRICK_WIDTH
  0007                    M     variable q=(BRICK_WIDTH)/3
  0000                    M     variable r=(BRICK_WIDTH)%3
                          M     if (q)
028E   3007               M     movlw q
028F   0B89               M     decfsz WREG
0290   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0291   0B80               M     decfsz T
0292   3???               M     bra next_brick
                          M     dropn 1
0293   3101               M     addfsr T,1
                      01054     black
                          M ;    banksel TRISA
0294   148C               M     bsf TRISA,CHROMA
0295   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
                      01055     tdelay 3
  0001                    M     variable q=(3)/3
  0000                    M     variable r=(3)%3
                          M     if (q)
0296   3001               M     movlw q
0297   0B89               M     decfsz WREG
0298   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      01056 ;    draw_border BORDER_WIDTH
                      01057     next_task BRICK_HEIGHT
0299   0A??               M     incf slice
029A   3008               M     movlw BRICK_HEIGHT
029B   02??               M     subwf slice,W
029C   1D03               M     skpz
                          M     leave
029D   2???               M     goto isr_exit
029E   01??               M     clrf slice
029F   0A??               M     incf task
02A0   3008               M     movlw BRICK_HEIGHT
02A1   07??               M     addwf lcount
                          M     leave
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02A2   2???               M     goto isr_exit
                      01058     
                      01059 ; task 13, draw 2nd brick row    
02A3                  01060 draw_row2 ;lcount enter at 82 leave at 90
                      01061     chroma_invert
02A3   003B               M     banksel PWM1CON
02A4   161B               M     bsf PWM1CON,POL
02A5   002?           01062     banksel row2
02A6   08??           01063     movfw row2
02A7   00??           01064     movwf temp
                      01065     tdelay LEFT_MARGIN-3
  0010                    M     variable q=(LEFT_MARGIN-3)/3
  0001                    M     variable r=(LEFT_MARGIN-3)%3
                          M     if (q)
02A8   3010               M     movlw q
02A9   0B89               M     decfsz WREG
02AA   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
02AB   0000               M     nop
                          M     endif
                      01066 ;    draw_border BORDER_WIDTH
                      01067     draw_wall yellow
  0000                    M     local next_brick
02AC   3008               M     movlw 8
                          M     pushw
02AD   0019               M     movwi --SP
02AE                      M next_brick    
02AE   35??               M     lslf temp
                          M     draw_brick yellow
  0000                    M     local no_brick
  0000                    M     local brick_delay
02AF   1C03               M     skpc
02B0   3???               M     bra no_brick
                          M     yellow
                          M ;    chroma_invert
                          M ;    banksel TRISA
02B1   120C               M     bcf TRISA,VIDEO_OUT
02B2   108C               M     bcf TRISA,CHROMA
02B3   0000               M     nop
02B4   3???               M     bra brick_delay
02B5                      M no_brick
                          M     black
                          M ;    banksel TRISA
02B5   148C               M     bsf TRISA,CHROMA
02B6   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
02B7   3???               M     bra brick_delay 
02B8                      M brick_delay    
                          M     tdelay BRICK_WIDTH
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0007                    M     variable q=(BRICK_WIDTH)/3
  0000                    M     variable r=(BRICK_WIDTH)%3
                          M     if (q)
02B8   3007               M     movlw q
02B9   0B89               M     decfsz WREG
02BA   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
02BB   0B80               M     decfsz T
02BC   3???               M     bra next_brick
                          M     dropn 1
02BD   3101               M     addfsr T,1
                      01068     black
                          M ;    banksel TRISA
02BE   148C               M     bsf TRISA,CHROMA
02BF   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
                      01069     tdelay 3
  0001                    M     variable q=(3)/3
  0000                    M     variable r=(3)%3
                          M     if (q)
02C0   3001               M     movlw q
02C1   0B89               M     decfsz WREG
02C2   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      01070 ;    draw_border BORDER_WIDTH
                      01071     next_task BRICK_HEIGHT
02C3   0A??               M     incf slice
02C4   3008               M     movlw BRICK_HEIGHT
02C5   02??               M     subwf slice,W
02C6   1D03               M     skpz
                          M     leave
02C7   2???               M     goto isr_exit
02C8   01??               M     clrf slice
02C9   0A??               M     incf task
02CA   3008               M     movlw BRICK_HEIGHT
02CB   07??               M     addwf lcount
                          M     leave
02CC   2???               M     goto isr_exit
                      01072 
                      01073 ; task 14, draw 3rd brick row    
02CD                  01074 draw_row3 ; lcount enter at 90 leave at 98
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01075 ;    btfss flags, F_EVEN
                      01076 ;    bra row3_exit
                      01077     chroma_ref
02CD   003B               M     banksel PWM1CON
02CE   121B               M     bcf PWM1CON,POL
02CF   002?           01078     banksel row3
02D0   08??           01079     movfw row3
02D1   00??           01080     movwf temp
                      01081     tdelay LEFT_MARGIN-3
  0010                    M     variable q=(LEFT_MARGIN-3)/3
  0001                    M     variable r=(LEFT_MARGIN-3)%3
                          M     if (q)
02D2   3010               M     movlw q
02D3   0B89               M     decfsz WREG
02D4   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
02D5   0000               M     nop
                          M     endif
                      01082 ;    draw_border BORDER_WIDTH
                      01083     draw_wall blue
  0000                    M     local next_brick
02D6   3008               M     movlw 8
                          M     pushw
02D7   0019               M     movwi --SP
02D8                      M next_brick    
02D8   35??               M     lslf temp
                          M     draw_brick blue
  0000                    M     local no_brick
  0000                    M     local brick_delay
02D9   1C03               M     skpc
02DA   3???               M     bra no_brick
                          M     blue
                          M ;    chroma_ref
                          M ;    banksel TRISA
02DB   160C               M     bsf TRISA, VIDEO_OUT
02DC   108C               M     bcf TRISA,CHROMA
02DD   0000               M     nop
02DE   3???               M     bra brick_delay
02DF                      M no_brick
                          M     black
                          M ;    banksel TRISA
02DF   148C               M     bsf TRISA,CHROMA
02E0   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
02E1   3???               M     bra brick_delay 
02E2                      M brick_delay    
                          M     tdelay BRICK_WIDTH
  0007                    M     variable q=(BRICK_WIDTH)/3
  0000                    M     variable r=(BRICK_WIDTH)%3
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     if (q)
02E2   3007               M     movlw q
02E3   0B89               M     decfsz WREG
02E4   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
02E5   0B80               M     decfsz T
02E6   3???               M     bra next_brick
                          M     dropn 1
02E7   3101               M     addfsr T,1
                      01084     black
                          M ;    banksel TRISA
02E8   148C               M     bsf TRISA,CHROMA
02E9   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
                      01085     tdelay 3
  0001                    M     variable q=(3)/3
  0000                    M     variable r=(3)%3
                          M     if (q)
02EA   3001               M     movlw q
02EB   0B89               M     decfsz WREG
02EC   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      01086 ;    draw_border BORDER_WIDTH
02ED                  01087 row3_exit    
                      01088     next_task BRICK_HEIGHT
02ED   0A??               M     incf slice
02EE   3008               M     movlw BRICK_HEIGHT
02EF   02??               M     subwf slice,W
02F0   1D03               M     skpz
                          M     leave
02F1   2???               M     goto isr_exit
02F2   01??               M     clrf slice
02F3   0A??               M     incf task
02F4   3008               M     movlw BRICK_HEIGHT
02F5   07??               M     addwf lcount
                          M     leave
02F6   2???               M     goto isr_exit
                      01089     
                      01090 ; task 15, draw 4th brick row    
02F7                  01091 draw_row4 ; lcount enter at 98 leave at 106
                      01092     chroma_invert
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02F7   003B               M     banksel PWM1CON
02F8   161B               M     bsf PWM1CON,POL
02F9   002?           01093     banksel row4
02FA   08??           01094     movfw row4
02FB   00??           01095     movwf temp
                      01096     tdelay LEFT_MARGIN-3
  0010                    M     variable q=(LEFT_MARGIN-3)/3
  0001                    M     variable r=(LEFT_MARGIN-3)%3
                          M     if (q)
02FC   3010               M     movlw q
02FD   0B89               M     decfsz WREG
02FE   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
02FF   0000               M     nop
                          M     endif
                      01097 ;    draw_border BORDER_WIDTH
                      01098     draw_wall dark_green
  0000                    M     local next_brick
0300   3008               M     movlw 8
                          M     pushw
0301   0019               M     movwi --SP
0302                      M next_brick    
0302   35??               M     lslf temp
                          M     draw_brick dark_green
  0000                    M     local no_brick
  0000                    M     local brick_delay
0303   1C03               M     skpc
0304   3???               M     bra no_brick
                          M     dark_green
                          M ;    chroma_invert
                          M ;    banksel TRISA
0305   160C               M     bsf TRISA, VIDEO_OUT
0306   108C               M     bcf TRISA,CHROMA
0307   0000               M     nop
0308   3???               M     bra brick_delay
0309                      M no_brick
                          M     black
                          M ;    banksel TRISA
0309   148C               M     bsf TRISA,CHROMA
030A   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
030B   3???               M     bra brick_delay 
030C                      M brick_delay    
                          M     tdelay BRICK_WIDTH
  0007                    M     variable q=(BRICK_WIDTH)/3
  0000                    M     variable r=(BRICK_WIDTH)%3
                          M     if (q)
030C   3007               M     movlw q
030D   0B89               M     decfsz WREG
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

030E   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
030F   0B80               M     decfsz T
0310   3???               M     bra next_brick
                          M     dropn 1
0311   3101               M     addfsr T,1
                      01099     black
                          M ;    banksel TRISA
0312   148C               M     bsf TRISA,CHROMA
0313   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
                      01100     tdelay 3
  0001                    M     variable q=(3)/3
  0000                    M     variable r=(3)%3
                          M     if (q)
0314   3001               M     movlw q
0315   0B89               M     decfsz WREG
0316   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      01101 ;    draw_border BORDER_WIDTH
                      01102     next_task BRICK_HEIGHT
0317   0A??               M     incf slice
0318   3008               M     movlw BRICK_HEIGHT
0319   02??               M     subwf slice,W
031A   1D03               M     skpz
                          M     leave
031B   2???               M     goto isr_exit
031C   01??               M     clrf slice
031D   0A??               M     incf task
031E   3008               M     movlw BRICK_HEIGHT
031F   07??               M     addwf lcount
                          M     leave
0320   2???               M     goto isr_exit
                      01103 
                      01104 ; task 16, draw 5th brick row    
0321                  01105 draw_row5 ; lcount enter at 106 leave at 114
0321   002?           01106     banksel row5
0322   08??           01107     movfw row5
0323   00??           01108     movwf temp
                      01109     tdelay LEFT_MARGIN-2
  0010                    M     variable q=(LEFT_MARGIN-2)/3
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0002                    M     variable r=(LEFT_MARGIN-2)%3
                          M     if (q)
0324   3010               M     movlw q
0325   0B89               M     decfsz WREG
0326   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
0327   2???               M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      01110 ;    draw_border BORDER_WIDTH
                      01111     draw_wall gray
  0000                    M     local next_brick
0328   3008               M     movlw 8
                          M     pushw
0329   0019               M     movwi --SP
032A                      M next_brick    
032A   35??               M     lslf temp
                          M     draw_brick white
  0000                    M     local no_brick
  0000                    M     local brick_delay
032B   1C03               M     skpc
032C   3???               M     bra no_brick
                          M     white
                          M ;    banksel TRISA
032D   148C               M     bsf TRISA,CHROMA
032E   120C               M     bcf TRISA,VIDEO_OUT
                          M ;    goto $+1
032F   0000               M     nop
0330   3???               M     bra brick_delay
0331                      M no_brick
                          M     black
                          M ;    banksel TRISA
0331   148C               M     bsf TRISA,CHROMA
0332   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
0333   3???               M     bra brick_delay 
0334                      M brick_delay    
                          M     tdelay BRICK_WIDTH
  0007                    M     variable q=(BRICK_WIDTH)/3
  0000                    M     variable r=(BRICK_WIDTH)%3
                          M     if (q)
0334   3007               M     movlw q
0335   0B89               M     decfsz WREG
0336   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     endif
0337   0B80               M     decfsz T
0338   3???               M     bra next_brick
                          M     dropn 1
0339   3101               M     addfsr T,1
                      01112     black
                          M ;    banksel TRISA
033A   148C               M     bsf TRISA,CHROMA
033B   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
                      01113     tdelay 3
  0001                    M     variable q=(3)/3
  0000                    M     variable r=(3)%3
                          M     if (q)
033C   3001               M     movlw q
033D   0B89               M     decfsz WREG
033E   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      01114 ;    draw_border BORDER_WIDTH
                      01115     black
                          M ;    banksel TRISA
033F   148C               M     bsf TRISA,CHROMA
0340   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
                      01116     next_task BRICK_HEIGHT
0341   0A??               M     incf slice
0342   3008               M     movlw BRICK_HEIGHT
0343   02??               M     subwf slice,W
0344   1D03               M     skpz
                          M     leave
0345   2???               M     goto isr_exit
0346   01??               M     clrf slice
0347   0A??               M     incf task
0348   3008               M     movlw BRICK_HEIGHT
0349   07??               M     addwf lcount
                          M     leave
034A   2???               M     goto isr_exit
                      01117 
                      01118 ; task 17,draw all rows between paddle and lower brick row    
034B                  01119 draw_empty ; lcount enter at 114 leave at LAST_VIDEO_LINE-PADDLE_THICKNESS+1
                      01120     tdelay LEFT_MARGIN
  0011                    M     variable q=(LEFT_MARGIN)/3
  0001                    M     variable r=(LEFT_MARGIN)%3
                          M     if (q)
034B   3011               M     movlw q
034C   0B89               M     decfsz WREG
034D   2???               M     goto $-1
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     endif
                          M     if (r==2)
                          M     goto $+1
                          M     endif 
                          M     if (r==1)
034E   0000               M     nop
                          M     endif
                      01121 ;    draw_border BORDER_WIDTH
                      01122     tdelay 320
  006A                    M     variable q=(320)/3
  0002                    M     variable r=(320)%3
                          M     if (q)
034F   306A               M     movlw q
0350   0B89               M     decfsz WREG
0351   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
0352   2???               M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
                      01123 ;    draw_border BORDER_WIDTH
                      01124     black
                          M ;    banksel TRISA
0353   148C               M     bsf TRISA,CHROMA
0354   160C               M     bsf TRISA,VIDEO_OUT
                          M ;    goto $+1
0355   0A??           01125     incf lcount
0356   30F3           01126     movlw LAST_VIDEO_LINE-PADDLE_THICKNESS+1
0357   02??           01127     subwf lcount,W
0358   1D03           01128     skpz
                      01129     leave
0359   2???               M     goto isr_exit
035A   01??           01130     clrf slice
035B   0A??           01131     incf task
                      01132     leave
035C   2???               M     goto isr_exit
                      01133 ;    next_task LAST_VIDEO_LINE-114-BRICK_HEIGHT
                      01134 
                      01135     
                      01136 ; task 18, draw paddle at bottom screen    
035D                  01137 draw_paddle
                      01138     tdelay LEFT_MARGIN+2
  0012                    M     variable q=(LEFT_MARGIN+2)/3
  0000                    M     variable r=(LEFT_MARGIN+2)%3
                          M     if (q)
035D   3012               M     movlw q
035E   0B89               M     decfsz WREG
035F   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
                          M     goto $+1
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
0360   08??           01139     movfw paddle_pos
0361   1903           01140     skpnz
0362   3???           01141     bra $+3
0363   0B89           01142     decfsz WREG
0364   3???           01143     bra $-1
0365   0021           01144     banksel TRISA
0366   120C           01145     bcf TRISA,VIDEO_OUT
                      01146     tdelay PADDLE_WIDTH
  000A                    M     variable q=(PADDLE_WIDTH)/3
  0002                    M     variable r=(PADDLE_WIDTH)%3
                          M     if (q)
0367   300A               M     movlw q
0368   0B89               M     decfsz WREG
0369   2???               M     goto $-1
                          M     endif
                          M     if (r==2)
036A   2???               M     goto $+1
                          M     endif 
                          M     if (r==1)
                          M     nop
                          M     endif
036B   160C           01147     bsf TRISA,VIDEO_OUT
                      01148     next_task PADDLE_THICKNESS
036C   0A??               M     incf slice
036D   3008               M     movlw PADDLE_THICKNESS
036E   02??               M     subwf slice,W
036F   1D03               M     skpz
                          M     leave
0370   2???               M     goto isr_exit
0371   01??               M     clrf slice
0372   0A??               M     incf task
0373   3008               M     movlw PADDLE_THICKNESS
0374   07??               M     addwf lcount
                          M     leave
0375   2???               M     goto isr_exit
                      01149 
                      01150 ; task 19,  wait end of this field, reset task to zero    
0376                  01151 wait_field_end
0376   0A??           01152     incf lcount
0377   1903           01153     skpnz
0378   1400           01154     bsf flags, F_HI_LINE
0379   1800           01155     btfsc flags, F_HI_LINE
037A   2???           01156     goto hi_line
                      01157     leave
037B   2???               M     goto isr_exit
037C                  01158 hi_line
037C   1880           01159     btfsc flags,F_EVEN
037D   2???           01160     goto even_field
037E   3005           01161     movlw 5
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

037F   02??           01162     subwf lcount,W
0380   1D03           01163     skpz
                      01164     leave
0381   2???               M     goto isr_exit
0382   2???           01165     goto field_end
0383                  01166 even_field
0383   3006           01167     movlw 6
0384   02??           01168     subwf lcount,W
0385   1D03           01169     skpz
                      01170     leave
0386   2???               M     goto isr_exit
                      01171 ; even field last line is half_line    
                      01172 ; set PWM3 for line 263 half-line
0387   003B           01173     banksel PWM3DC
0388   3003           01174     movlw high HALF_LINE
0389   00B6           01175     movwf PWM3PRH
038A   308D           01176     movlw low HALF_LINE
038B   00B5           01177     movwf PWM3PRL
038C   17BF           01178     bsf PWM3LDCON,7
038D                  01179 field_end
038D   01??           01180     clrf task
038E   01??           01181     clrf slice
038F   01??           01182     clrf lcount
0390   1000           01183     bcf flags, F_HI_LINE
0391   1500           01184     bsf flags, F_SYNC
                      01185 ; toggle odd/even field flag    
0392   3002           01186     movlw 1<<F_EVEN
0393   06??           01187     xorwf flags
                      01188     leave
0394   2???               M     goto isr_exit
                      01189 
                      01190 ; helper functions
                      01191 
                      01192 ; add 2 BCD digits
                      01193 ; parameters:
                      01194 ;   WREG -> first digit
                      01195 ;   T -> second digit
                      01196 ;   C -> carry from previous digits add    
                      01197 ; output:
                      01198 ;   T -> sum
                      01199 ;   C -> overflow
0395                  01200 bcd_add
0395   3D80           01201     addwfc T    
0396   300A           01202     movlw 10
0397   0200           01203     subwf T,W
0398   1C03           01204     skpc
0399   0008           01205     return
039A   3006           01206     movlw 6
039B   0780           01207     addwf T
039C   300F           01208     movlw 15
039D   0580           01209     andwf T
039E   1403           01210     bsf STATUS,C
039F   0008           01211     return
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01212     
                      01213 ; increment user score
                      01214 ; This is a BCD addition where a single digit is added to score.   
                      01215 ; score is stored as big indian
                      01216 ; argument: 
                      01217 ;   WREG ->  bdc digit to add to score variable
03A0                  01218 inc_score
                      01219     pushw
03A0   0019               M     movwi --SP
03A1   1003           01220     clrc
03A2   300F           01221     movlw 15
03A3   05??           01222     andwf score+1,W
03A4   2???           01223     call bcd_add
03A5   0103           01224     clrw 
                      01225     pushw
03A6   0019               M     movwi --SP
03A7   0E??           01226     swapf score+1,W
03A8   390F           01227     andlw 15
03A9   2???           01228     call bcd_add
03AA   1803           01229     skpnc
03AB   0A??           01230     incf score
                      01231     popw
03AC   0012               M     moviw SP++
03AD   0E89           01232     swapf WREG
03AE   0400           01233     iorwf T,W
03AF   00??           01234     movwf score+1
                      01235     dropn 1
03B0   3101               M     addfsr T,1
03B1   0008           01236     return
                      01237     
                      01238 ;***********************************
                      01239 ; digit_offset, compute digit position in 'digits' table
                      01240 ;   position = digit * 5
                      01241 ; 
                      01242 ; input: WREG -> digit value {0..9}
                      01243 ;         
                      01244 ; output: WREG -> displacement in table
                      01245 ;***********************************
03B2                  01246 digit_offset    
                      01247     pushw 
03B2   0019               M     movwi --SP
03B3   3589           01248     lslf WREG
03B4   3589           01249     lslf WREG
03B5   0780           01250     addwf T
                      01251     popw
03B6   0012               M     moviw SP++
03B7   0008           01252     return
                      01253     
03B8                  01254 init_brick_wall
03B8   30??           01255     movlw high row1
03B9   0087           01256     movwf FSR1H
03BA   30??           01257     movlw low row1
03BB   0086           01258     movwf FSR1L
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03BC   3005           01259     movlw 5
03BD   00??           01260     movwf temp
03BE   30FF           01261     movlw 0xff
03BF                  01262 ibw    
03BF   001E           01263     movwi FSR1++
03C0   0B??           01264     decfsz temp
03C1   3???           01265     bra ibw
03C2   0008           01266     return
                      01267 
                      01268 ;    LFSR 32 bits
                      01269 ;    REF:  http://www.ece.cmu.edu/~koopman/lfsr/index.html
                      01270 ;    must be initialized with 0xFFFFFFFF
  7FFFF159            01271 LFSR_MASK equ 0x7FFFF159
03C3                  01272 lfsr_rand
03C3   0C??           01273     rrf seed+3,W   ; rotation du LFSR 1 bit vers la droite
03C4   0C??           01274     rrf seed, F
03C5   0C??           01275     rrf seed+1,F
03C6   0C??           01276     rrf seed+2,F
03C7   0C??           01277     rrf seed+3,F
03C8   1B80           01278     btfsc seed+3,7
03C9   2???           01279     goto lfsr_rand_exit
03CA   3059           01280     movlw LFSR_MASK & 0xFF
03CB   06??           01281     xorwf seed
03CC   30F1           01282     movlw (LFSR_MASK>>8) & 0xFF
03CD   06??           01283     xorwf seed+1
03CE   30FF           01284     movlw (LFSR_MASK>>16) & 0xFF
03CF   06??           01285     xorwf seed+2
03D0   307F           01286     movlw (LFSR_MASK>>24) & 0xFF
03D1   06??           01287     xorwf seed+3
03D2                  01288 lfsr_rand_exit
03D2   301F           01289     movlw 0x1F
03D3   05??           01290     andwf seed,W  ; modulo 32
03D4   0008           01291     return
                      01292     
03D5                  01293 set_ball_dx
03D5   2???           01294     call lfsr_rand ;random
03D6   3007           01295     movlw 7
03D7   05??           01296     andwf seed,W
03D8   3589           01297     lslf WREG
03D9   000B           01298     brw
03DA   3000           01299     movlw 0
03DB   3???           01300     bra set_ball_dx_exit
03DC   3001           01301     movlw 1
03DD   3???           01302     bra set_ball_dx_exit
03DE   30FF           01303     movlw -1
03DF   3???           01304     bra set_ball_dx_exit
03E0   3000           01305     movlw 0
03E1   3???           01306     bra set_ball_dx_exit
03E2   3001           01307     movlw 1
03E3   3???           01308     bra set_ball_dx_exit
03E4   30FF           01309     movlw -1
03E5   3???           01310     bra set_ball_dx_exit
03E6   30FF           01311     movlw -1
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03E7   3???           01312     bra set_ball_dx_exit
03E8   3001           01313     movlw 1
03E9                  01314 set_ball_dx_exit
03E9   00??           01315     movwf ball_dx
03EA   0008           01316     return
                      01317     
03EB                  01318 game_init
03EB   01??           01319     clrf score
03EC   01??           01320     clrf score+1
03ED   2???           01321     call init_brick_wall
03EE   002?           01322     banksel balls
03EF   3003           01323     movlw 3
03F0   00??           01324     movwf balls
03F1   01??           01325     clrf ball_timer
03F2   0A??           01326     incf ball_timer
03F3   30EB           01327     movlw PADDLE_Y-BRICK_HEIGHT
03F4   00??           01328     movwf ball_y
03F5   2???           01329     call set_ball_dx
03F6   30FC           01330     movlw -4
03F7   00??           01331     movwf ball_dy
03F8   3002           01332     movlw 2
03F9   00??           01333     movwf ball_speed
03FA   1600           01334     bsf flags, F_START
03FB   1280           01335     bcf flags, F_PAUSE
03FC   0008           01336     return
                      01337     
                      01338 ; delay by TIMER0
                      01339 ; parameter
                      01340 ;   WREG -> 2*Tcy+7cy    
03FD                  01341 t0delay 
03FD   0989           01342     comf WREG
03FE   0095           01343     movwf TMR0
03FF   110B           01344     bcf INTCON,T0IF
0400   1D0B           01345     btfss INTCON,T0IF
0401   3???           01346     bra $-1
0402   0008           01347     return
                      01348     
                      01349 MAIN_PROG CODE                      ; let linker place main program
                      01350 
0000                  01351 START
                      01352 ; clear common RAM
0000   0185           01353     clrf FSR0H
0001   3070           01354     movlw 0x70
0002   0084           01355     movwf FSR0L
0003   0103           01356     clrw
0004   001A           01357     movwi FSR0++
0005   1F84           01358     btfss FSR0L,7
0006   3???           01359     bra $-2
                      01360 ; clear banked RAM
0007   0184           01361     clrf FSR0L
0008   3020           01362     movlw 0x20
0009   0085           01363     movwf FSR0H
000A   0103           01364     clrw 
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000B   001A           01365     movwi FSR0++
000C   1C05           01366     btfss FSR0H,0
000D   3???           01367     bra $-2
                      01368 ; initialize LFSR seed
000E   002?           01369     banksel seed
000F   09??           01370     comf seed
0010   09??           01371     comf seed+1
0011   09??           01372     comf seed+2
0012   09??           01373     comf seed+3
                      01374 ;   setup arguments stack pointer
0013   30??           01375     movlw high (stack+STACK_SIZE)
0014   0085           01376     movwf FSR0H
0015   30??           01377     movlw low (stack+STACK_SIZE)
0016   0084           01378     movwf FSR0L
                      01379 ; setup OPTION register to enable weak pullup and prescale used by TIMER
                      01380 ; TIMER0 prescale 1:2
0017   3050           01381     movlw ~((1<<NOT_WPUEN)|(1<<TMR0CS)|(1<<PSA)|(7<<PS0_OPTION_REG))
0018   0095           01382     movwf OPTION_REG
                      01383 ; disable analog inputs, except AN0
0019   0023           01384     banksel ANSELA
001A   018C           01385     clrf ANSELA
                      01386 ; paddle potentiometer input     
001B   140C           01387     bsf ANSELA,PADDLE
001C   0021           01388     banksel ADCON1
001D   3020           01389     movlw (2<<ADCS0)
001E   009E           01390     movwf ADCON1
                      01391 ; pin setup
001F   0024           01392     banksel WPUA
0020   018C           01393     clrf WPUA
0021   0021           01394     banksel TRISA
0022   110C           01395     bcf TRISA,SYNC_OUT
0023   100C           01396     bcf TRISA,AUDIO
0024   0022           01397     banksel LATA
0025   160C           01398     bsf LATA, VIDEO_OUT
                      01399 ; PWM1 chroma signal on RA1
0026   003B           01400     banksel PWM1CON
0027   019F           01401     clrf PWM1LDCON
0028   0191           01402     clrf PWM1PHL
0029   0192           01403     clrf PWM1PHH
002A   0197           01404     clrf PWM1OFL
002B   0198           01405     clrf PWM1OFH
002C   0196           01406     clrf PWM1PRH
002D   3007           01407     movlw 7
002E   0095           01408     movwf PWM1PRL
002F   3004           01409     movlw 4
0030   0093           01410     movwf PWM1DCL
0031   0194           01411     clrf PWM1DCH
0032   179F           01412     bsf PWM1LDCON,7
0033   30C0           01413     movlw (1<<EN)|(1<<OE)
0034   009B           01414     movwf PWM1CON
                      01415 ; PWM2 sound
0035   003B           01416     banksel PWM2CON
0036   01A1           01417     clrf PWM2PHL
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0037   01A2           01418     clrf PWM2PHH
0038   01A7           01419     clrf PWM2OFL
0039   01A8           01420     clrf PWM2OFH
003A   3030           01421     movlw 3<<PWM2PS0 ; clock source FOSC/8
003B   00AE           01422     movwf PWM2CLKCON
003C   308B           01423     movlw high 35787
003D   00A6           01424     movwf PWM2PRH
003E   30CB           01425     movlw low 35787
003F   00A5           01426     movwf PWM2PRL
0040   3626           01427     lsrf PWM2PRH,W
0041   00A4           01428     movwf PWM2DCH
0042   0C25           01429     rrf PWM2PRL,W
0043   00A3           01430     movwf PWM2DCL
0044   17AF           01431     bsf PWM2LDCON,LDA
                      01432 ; PWM3 set to horizontal period 15734 hertz, output on RA2
0045   003B           01433     banksel PWM3CON
0046   01BF           01434     clrf PWM3LDCON
0047   01B1           01435     clrf PWM3PHL
0048   01B2           01436     clrf PWM3PHH
0049   01B7           01437     clrf PWM3OFL
004A   01B8           01438     clrf PWM3OFH
004B   301B           01439     movlw low HPERIOD
004C   00B5           01440     movwf PWM3PRL
004D   3007           01441     movlw high HPERIOD
004E   00B6           01442     movwf PWM3PRH
004F   3086           01443     movlw HSYNC
0050   00B3           01444     movwf PWM3DCL
0051   01B4           01445     clrf PWM3DCH
0052   30D0           01446     movlw (1<<EN)|(1<<OE)|(1<<POL)
0053   00BB           01447     movwf PWM3CON
0054   17BF           01448     bsf PWM3LDCON,7
0055   143C           01449     bsf PWM3INTE,PRIE
                      01450 ; enbable interrupt    
0056   0020           01451     banksel PIR3
0057   1313           01452     bcf PIR3,PWM3IF
0058   0021           01453     banksel PIE3
0059   1713           01454     bsf PIE3,PWM3IE
005A   170B           01455     bsf INTCON,PEIE
005B   178B           01456     bsf INTCON,GIE
005C   01??           01457     clrf flags
005D   1500           01458     bsf flags, F_SYNC
                      01459 ; all processing done in ISR    
005E   2???           01460     goto $
                      01461 
                      01462 ; digits character table
005F                  01463 digits
005F   000B           01464     brw
0060   3440 34A0 34A0 01465     dt  0x40,0xA0,0xA0,0xA0,0x40 ; 0
       34A0 3440 
0065   3440 34C0 3440 01466     dt  0x40,0xC0,0x40,0x40,0xE0 ; 1
       3440 34E0 
006A   34E0 3420 34C0 01467     dt  0xE0,0x20,0xC0,0x80,0xE0 ; 2
       3480 34E0 
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

006F   34E0 3420 34C0 01468     dt  0xE0,0x20,0xC0,0x20,0xE0 ; 3
       3420 34E0 
0074   34A0 34A0 34E0 01469     dt  0xA0,0xA0,0xE0,0x20,0x20 ; 4
       3420 3420 
0079   34E0 3480 34E0 01470     dt  0xE0,0x80,0xE0,0x20,0xE0 ; 5
       3420 34E0 
007E   34C0 3480 34E0 01471     dt  0xC0,0x80,0xE0,0xA0,0xE0 ; 6
       34A0 34E0 
0083   34E0 3420 3420 01472     dt  0xE0,0x20,0x20,0x20,0x20 ; 7
       3420 3420 
0088   34E0 34A0 34E0 01473     dt  0xE0,0xA0,0xE0,0xA0,0xE0 ; 8
       34A0 34E0 
008D   34E0 34A0 34E0 01474     dt  0xE0,0xA0,0xE0,0x20,0x60 ; 9
       3420 3460 
                      01475     
                      01476     
                      01477 eeprom org (PROG_SIZE-EEPROM_SIZE)
0780                  01478 max_score 
                      01479  
3FA7 1EFF             01480     END
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 48


SYMBOL TABLE
  LABEL                             VALUE 

ABDEN                             00000000
ABDOVF                            00000007
ADCON0                            0000009D
ADCON1                            0000009E
ADCON2                            0000009F
ADCS0                             00000004
ADCS1                             00000005
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADFVR0                            00000000
ADFVR1                            00000001
ADGO                              00000001
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADPREF0                           00000000
ADPREF1                           00000001
ADRES                             0000009B
ADRESH                            0000009C
ADRESL                            0000009B
ANSA0                             00000000
ANSA1                             00000001
ANSA2                             00000002
ANSA4                             00000004
ANSELA                            0000018C
APFCON                            0000011D
APFCON0                           0000011D
AUDIO                             00000000
BALL_BOTTOM_BOUND                 000000FA
BALL_HEIGHT                       00000008
BALL_LEFT_BOUND                   00000000
BALL_RIGHT_BOUND                  00000052
BALL_TOP_BOUND                    0000003A
BALL_WIDTH                        00000008
BAUDCON                           0000019F
BORCON                            00000116
BORDER_WIDTH                      00000004
BORFS                             00000006
BORRDY                            00000000
BRG16                             00000003
BRGH                              00000002
BRICK_HEIGHT                      00000008
BRICK_WIDTH                       00000015
BSR                               00000008
BSR0                              00000000
BSR1                              00000001
BSR2                              00000002
BSR3                              00000003
BSR4                              00000004
BSR_SHAD                          00000FE6
C                                 00000000
C1HYS                             00000001
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 49


SYMBOL TABLE
  LABEL                             VALUE 

C1IE                              00000005
C1IF                              00000005
C1INTN                            00000006
C1INTP                            00000007
C1NCH0                            00000000
C1NCH1                            00000001
C1NCH2                            00000002
C1OE                              00000005
C1ON                              00000007
C1OUT                             00000006
C1PCH0                            00000004
C1PCH1                            00000005
C1POL                             00000004
C1SP                              00000002
C1SYNC                            00000000
CDAFVR0                           00000002
CDAFVR1                           00000003
CFGS                              00000006
CHROMA                            00000001
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CHS4                              00000006
CLKIN                             00000005
CM1CON0                           00000111
CM1CON1                           00000112
CMOUT                             00000115
COURT_WIDTH                       000000F8
CREN                              00000004
CS0                               00000000
CS1                               00000001
CSRC                              00000007
CWG1CON0                          00000693
CWG1CON1                          00000694
CWG1CON2                          00000695
CWG1DBF                           00000692
CWG1DBF0                          00000000
CWG1DBF1                          00000001
CWG1DBF2                          00000002
CWG1DBF3                          00000003
CWG1DBF4                          00000004
CWG1DBF5                          00000005
CWG1DBR                           00000691
CWG1DBR0                          00000000
CWG1DBR1                          00000001
CWG1DBR2                          00000002
CWG1DBR3                          00000003
CWG1DBR4                          00000004
CWG1DBR5                          00000005
CWGASEL                           00000006
CWGBSEL                           00000005
C_SHAD                            00000000
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 50


SYMBOL TABLE
  LABEL                             VALUE 

DACCON0                           00000118
DACCON1                           00000119
DACEN                             00000007
DACLPS                            00000006
DACOE                             00000005
DACPSS0                           00000002
DACPSS1                           00000003
DACR0                             00000000
DACR1                             00000001
DACR2                             00000002
DACR3                             00000003
DACR4                             00000004
DC                                00000001
DCIE                              00000001
DCIF                              00000001
DC_SHAD                           00000001
EEPROM_SIZE                       00000080
EN                                00000007
F                                 00000001
FERR                              00000002
FIRST_VIDEO_LINE                  0000001E
FREE                              00000004
FSR0                              00000004
FSR0H                             00000005
FSR0H_SHAD                        00000FE9
FSR0L                             00000004
FSR0L_SHAD                        00000FE8
FSR0_SHAD                         00000FE8
FSR1                              00000006
FSR1H                             00000007
FSR1H_SHAD                        00000FEB
FSR1L                             00000006
FSR1L_SHAD                        00000FEA
FSR1_SHAD                         00000FEA
FVRCON                            00000117
FVREN                             00000007
FVRRDY                            00000006
F_EVEN                            00000001
F_HI_LINE                         00000000
F_PAUSE                           00000005
F_SOUND                           00000003
F_START                           00000004
F_SYNC                            00000002
Fcy                               006D3CD8
Fhorz                             00003D76
Fosc                              01B4F360
G1ARSEN                           00000006
G1ASDLA0                          00000004
G1ASDLA1                          00000005
G1ASDLB0                          00000006
G1ASDLB1                          00000007
G1ASDSC1                          00000002
G1ASDSFLT                         00000001
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

G1ASE                             00000007
G1CS0                             00000000
G1EN                              00000007
G1IS0                             00000000
G1IS1                             00000001
G1IS2                             00000002
G1OEA                             00000005
G1OEB                             00000006
G1POLA                            00000003
G1POLB                            00000004
GIE                               00000007
GO                                00000001
GO_NOT_DONE                       00000001
HALF_LINE                         0000038D
HEQUAL                            00000041
HFIOFL                            00000003
HFIOFR                            00000004
HFIOFS                            00000000
HPERIOD                           0000071B
HSYNC                             00000086
INDF0                             00000000
INDF1                             00000001
INLVLA                            0000038C
INLVLA0                           00000000
INLVLA1                           00000001
INLVLA2                           00000002
INLVLA3                           00000003
INLVLA4                           00000004
INLVLA5                           00000005
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOCAF                             00000393
IOCAF0                            00000000
IOCAF1                            00000001
IOCAF2                            00000002
IOCAF3                            00000003
IOCAF4                            00000004
IOCAF5                            00000005
IOCAN                             00000392
IOCAN0                            00000000
IOCAN1                            00000001
IOCAN2                            00000002
IOCAN3                            00000003
IOCAN4                            00000004
IOCAN5                            00000005
IOCAP                             00000391
IOCAP0                            00000000
IOCAP1                            00000001
IOCAP2                            00000002
IOCAP3                            00000003
IOCAP4                            00000004
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 52


SYMBOL TABLE
  LABEL                             VALUE 

IOCAP5                            00000005
IOCIE                             00000003
IOCIF                             00000000
IRCF0                             00000003
IRCF1                             00000004
IRCF2                             00000005
IRCF3                             00000006
LAST_VIDEO_LINE                   000000FA
LATA                              0000010C
LATA0                             00000000
LATA1                             00000001
LATA2                             00000002
LATA4                             00000004
LATA5                             00000005
LDA                               00000007
LDS0                              00000000
LDS1                              00000001
LDT                               00000006
LEFT_MARGIN                       00000034
LFIOFR                            00000001
LFSR_MASK                         7FFFF159
LWLO                              00000005
MC1OUT                            00000000
MFIOFR                            00000002
MODE0                             00000002
MODE1                             00000003
MPWM1EN                           00000000
MPWM1LD                           00000000
MPWM1OUT                          00000000
MPWM2EN                           00000001
MPWM2LD                           00000001
MPWM2OUT                          00000001
MPWM3EN                           00000002
MPWM3LD                           00000002
MPWM3OUT                          00000002
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RI                            00000002
NOT_RMCLR                         00000003
NOT_RWDT                          00000004
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_WPUEN                         00000007
ODA0                              00000000
ODA1                              00000001
ODA2                              00000002
ODA4                              00000004
ODA5                              00000005
ODCONA                            0000028C
OE                                00000006
OERR                              00000001
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 53


SYMBOL TABLE
  LABEL                             VALUE 

OFIE                              00000003
OFIF                              00000003
OFM0                              00000005
OFM1                              00000006
OFO                               00000004
OFS0                              00000000
OFS1                              00000001
OPTION_REG                        00000095
OSCCON                            00000099
OSCSTAT                           0000009A
OSCTUNE                           00000098
OSTS                              00000005
OUT                               00000005
P1SEL                             00000000
P2SEL                             00000001
PADDLE                            00000000
PADDLE_LIMIT                      0000004A
PADDLE_THICKNESS                  00000008
PADDLE_WIDTH                      00000020
PADDLE_Y                          000000F3
PCL                               00000002
PCLATH                            0000000A
PCLATH_SHAD                       00000FE7
PCON                              00000096
PEIE                              00000006
PHIE                              00000002
PHIF                              00000002
PIE1                              00000091
PIE2                              00000092
PIE3                              00000093
PIR1                              00000011
PIR2                              00000012
PIR3                              00000013
PLLR                              00000006
PMADR                             00000191
PMADRH                            00000192
PMADRL                            00000191
PMCON1                            00000195
PMCON2                            00000196
PMDAT                             00000193
PMDATH                            00000194
PMDATL                            00000193
POL                               00000004
PORTA                             0000000C
PR2                               0000001B
PRIE                              00000000
PRIF                              00000000
PROG_SIZE                         00000800
PS0_OPTION_REG                    00000000
PS0_PWM1CLKCON                    00000004
PS0_PWM2CLKCON                    00000004
PS0_PWM3CLKCON                    00000004
PS1_OPTION_REG                    00000001
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 54


SYMBOL TABLE
  LABEL                             VALUE 

PS1_PWM1CLKCON                    00000005
PS1_PWM2CLKCON                    00000005
PS1_PWM3CLKCON                    00000005
PS2_OPTION_REG                    00000002
PS2_PWM1CLKCON                    00000006
PS2_PWM2CLKCON                    00000006
PS2_PWM3CLKCON                    00000006
PSA                               00000003
PWM1CLKCON                        00000D9E
PWM1CON                           00000D9B
PWM1CS0                           00000000
PWM1CS1                           00000001
PWM1DC                            00000D93
PWM1DCH                           00000D94
PWM1DCH0                          00000000
PWM1DCH1                          00000001
PWM1DCH2                          00000002
PWM1DCH3                          00000003
PWM1DCH4                          00000004
PWM1DCH5                          00000005
PWM1DCH6                          00000006
PWM1DCH7                          00000007
PWM1DCIE                          00000001
PWM1DCIF                          00000001
PWM1DCL                           00000D93
PWM1DCL0                          00000000
PWM1DCL1                          00000001
PWM1DCL2                          00000002
PWM1DCL3                          00000003
PWM1DCL4                          00000004
PWM1DCL5                          00000005
PWM1DCL6                          00000006
PWM1DCL7                          00000007
PWM1EN                            00000007
PWM1EN_A                          00000000
PWM1IE                            00000004
PWM1IF                            00000004
PWM1INTCON                        00000D9C
PWM1INTE                          00000D9C
PWM1INTF                          00000D9D
PWM1INTFLG                        00000D9D
PWM1LD                            00000007
PWM1LDA_A                         00000000
PWM1LDCON                         00000D9F
PWM1LDM                           00000006
PWM1LDS0                          00000000
PWM1LDS1                          00000001
PWM1MODE0                         00000002
PWM1MODE1                         00000003
PWM1OE                            00000006
PWM1OF                            00000D97
PWM1OFCON                         00000DA0
PWM1OFH                           00000D98
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 55


SYMBOL TABLE
  LABEL                             VALUE 

PWM1OFH0                          00000000
PWM1OFH1                          00000001
PWM1OFH2                          00000002
PWM1OFH3                          00000003
PWM1OFH4                          00000004
PWM1OFH5                          00000005
PWM1OFH6                          00000006
PWM1OFH7                          00000007
PWM1OFIE                          00000003
PWM1OFIF                          00000003
PWM1OFL                           00000D97
PWM1OFL0                          00000000
PWM1OFL1                          00000001
PWM1OFL2                          00000002
PWM1OFL3                          00000003
PWM1OFL4                          00000004
PWM1OFL5                          00000005
PWM1OFL6                          00000006
PWM1OFL7                          00000007
PWM1OFM0                          00000005
PWM1OFM1                          00000006
PWM1OFMC                          00000004
PWM1OFS0                          00000000
PWM1OFS1                          00000001
PWM1OUT                           00000005
PWM1OUT_A                         00000000
PWM1PH                            00000D91
PWM1PHH                           00000D92
PWM1PHH0                          00000000
PWM1PHH1                          00000001
PWM1PHH2                          00000002
PWM1PHH3                          00000003
PWM1PHH4                          00000004
PWM1PHH5                          00000005
PWM1PHH6                          00000006
PWM1PHH7                          00000007
PWM1PHIE                          00000002
PWM1PHIF                          00000002
PWM1PHL                           00000D91
PWM1PHL0                          00000000
PWM1PHL1                          00000001
PWM1PHL2                          00000002
PWM1PHL3                          00000003
PWM1PHL4                          00000004
PWM1PHL5                          00000005
PWM1PHL6                          00000006
PWM1PHL7                          00000007
PWM1POL                           00000004
PWM1PR                            00000D95
PWM1PRH                           00000D96
PWM1PRH0                          00000000
PWM1PRH1                          00000001
PWM1PRH2                          00000002
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 56


SYMBOL TABLE
  LABEL                             VALUE 

PWM1PRH3                          00000003
PWM1PRH4                          00000004
PWM1PRH5                          00000005
PWM1PRH6                          00000006
PWM1PRH7                          00000007
PWM1PRIE                          00000000
PWM1PRIF                          00000000
PWM1PRL                           00000D95
PWM1PRL0                          00000000
PWM1PRL1                          00000001
PWM1PRL2                          00000002
PWM1PRL3                          00000003
PWM1PRL4                          00000004
PWM1PRL5                          00000005
PWM1PRL6                          00000006
PWM1PRL7                          00000007
PWM1PS0                           00000004
PWM1PS1                           00000005
PWM1PS2                           00000006
PWM1TMR                           00000D99
PWM1TMRH                          00000D9A
PWM1TMRH0                         00000000
PWM1TMRH1                         00000001
PWM1TMRH2                         00000002
PWM1TMRH3                         00000003
PWM1TMRH4                         00000004
PWM1TMRH5                         00000005
PWM1TMRH6                         00000006
PWM1TMRH7                         00000007
PWM1TMRL                          00000D99
PWM1TMRL0                         00000000
PWM1TMRL1                         00000001
PWM1TMRL2                         00000002
PWM1TMRL3                         00000003
PWM1TMRL4                         00000004
PWM1TMRL5                         00000005
PWM1TMRL6                         00000006
PWM1TMRL7                         00000007
PWM2CLKCON                        00000DAE
PWM2CON                           00000DAB
PWM2CS0                           00000000
PWM2CS1                           00000001
PWM2DC                            00000DA3
PWM2DCH                           00000DA4
PWM2DCH0                          00000000
PWM2DCH1                          00000001
PWM2DCH2                          00000002
PWM2DCH3                          00000003
PWM2DCH4                          00000004
PWM2DCH5                          00000005
PWM2DCH6                          00000006
PWM2DCH7                          00000007
PWM2DCIE                          00000001
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 57


SYMBOL TABLE
  LABEL                             VALUE 

PWM2DCIF                          00000001
PWM2DCL                           00000DA3
PWM2DCL0                          00000000
PWM2DCL1                          00000001
PWM2DCL2                          00000002
PWM2DCL3                          00000003
PWM2DCL4                          00000004
PWM2DCL5                          00000005
PWM2DCL6                          00000006
PWM2DCL7                          00000007
PWM2EN                            00000007
PWM2EN_A                          00000001
PWM2IE                            00000005
PWM2IF                            00000005
PWM2INTCON                        00000DAC
PWM2INTE                          00000DAC
PWM2INTF                          00000DAD
PWM2INTFLG                        00000DAD
PWM2LD                            00000007
PWM2LDA_A                         00000001
PWM2LDCON                         00000DAF
PWM2LDM                           00000006
PWM2LDS0                          00000000
PWM2LDS1                          00000001
PWM2MODE0                         00000002
PWM2MODE1                         00000003
PWM2OE                            00000006
PWM2OF                            00000DA7
PWM2OFCON                         00000DB0
PWM2OFH                           00000DA8
PWM2OFH0                          00000000
PWM2OFH1                          00000001
PWM2OFH2                          00000002
PWM2OFH3                          00000003
PWM2OFH4                          00000004
PWM2OFH5                          00000005
PWM2OFH6                          00000006
PWM2OFH7                          00000007
PWM2OFIE                          00000003
PWM2OFIF                          00000003
PWM2OFL                           00000DA7
PWM2OFL0                          00000000
PWM2OFL1                          00000001
PWM2OFL2                          00000002
PWM2OFL3                          00000003
PWM2OFL4                          00000004
PWM2OFL5                          00000005
PWM2OFL6                          00000006
PWM2OFL7                          00000007
PWM2OFM0                          00000005
PWM2OFM1                          00000006
PWM2OFMC                          00000004
PWM2OFS0                          00000000
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 58


SYMBOL TABLE
  LABEL                             VALUE 

PWM2OFS1                          00000001
PWM2OUT                           00000005
PWM2OUT_A                         00000001
PWM2PH                            00000DA1
PWM2PHH                           00000DA2
PWM2PHH0                          00000000
PWM2PHH1                          00000001
PWM2PHH2                          00000002
PWM2PHH3                          00000003
PWM2PHH4                          00000004
PWM2PHH5                          00000005
PWM2PHH6                          00000006
PWM2PHH7                          00000007
PWM2PHIE                          00000002
PWM2PHIF                          00000002
PWM2PHL                           00000DA1
PWM2PHL0                          00000000
PWM2PHL1                          00000001
PWM2PHL2                          00000002
PWM2PHL3                          00000003
PWM2PHL4                          00000004
PWM2PHL5                          00000005
PWM2PHL6                          00000006
PWM2PHL7                          00000007
PWM2POL                           00000004
PWM2PR                            00000DA5
PWM2PRH                           00000DA6
PWM2PRH0                          00000000
PWM2PRH1                          00000001
PWM2PRH2                          00000002
PWM2PRH3                          00000003
PWM2PRH4                          00000004
PWM2PRH5                          00000005
PWM2PRH6                          00000006
PWM2PRH7                          00000007
PWM2PRIE                          00000000
PWM2PRIF                          00000000
PWM2PRL                           00000DA5
PWM2PRL0                          00000000
PWM2PRL1                          00000001
PWM2PRL2                          00000002
PWM2PRL3                          00000003
PWM2PRL4                          00000004
PWM2PRL5                          00000005
PWM2PRL6                          00000006
PWM2PRL7                          00000007
PWM2PS0                           00000004
PWM2PS1                           00000005
PWM2PS2                           00000006
PWM2TMR                           00000DA9
PWM2TMRH                          00000DAA
PWM2TMRH0                         00000000
PWM2TMRH1                         00000001
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 59


SYMBOL TABLE
  LABEL                             VALUE 

PWM2TMRH2                         00000002
PWM2TMRH3                         00000003
PWM2TMRH4                         00000004
PWM2TMRH5                         00000005
PWM2TMRH6                         00000006
PWM2TMRH7                         00000007
PWM2TMRL                          00000DA9
PWM2TMRL0                         00000000
PWM2TMRL1                         00000001
PWM2TMRL2                         00000002
PWM2TMRL3                         00000003
PWM2TMRL4                         00000004
PWM2TMRL5                         00000005
PWM2TMRL6                         00000006
PWM2TMRL7                         00000007
PWM3CLKCON                        00000DBE
PWM3CON                           00000DBB
PWM3CS0                           00000000
PWM3CS1                           00000001
PWM3DC                            00000DB3
PWM3DCH                           00000DB4
PWM3DCH0                          00000000
PWM3DCH1                          00000001
PWM3DCH2                          00000002
PWM3DCH3                          00000003
PWM3DCH4                          00000004
PWM3DCH5                          00000005
PWM3DCH6                          00000006
PWM3DCH7                          00000007
PWM3DCIE                          00000001
PWM3DCIF                          00000001
PWM3DCL                           00000DB3
PWM3DCL0                          00000000
PWM3DCL1                          00000001
PWM3DCL2                          00000002
PWM3DCL3                          00000003
PWM3DCL4                          00000004
PWM3DCL5                          00000005
PWM3DCL6                          00000006
PWM3DCL7                          00000007
PWM3EN                            00000007
PWM3EN_A                          00000002
PWM3IE                            00000006
PWM3IF                            00000006
PWM3INTCON                        00000DBC
PWM3INTE                          00000DBC
PWM3INTF                          00000DBD
PWM3INTFLG                        00000DBD
PWM3LD                            00000007
PWM3LDA_A                         00000002
PWM3LDCON                         00000DBF
PWM3LDM                           00000006
PWM3LDS0                          00000000
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 60


SYMBOL TABLE
  LABEL                             VALUE 

PWM3LDS1                          00000001
PWM3MODE0                         00000002
PWM3MODE1                         00000003
PWM3OE                            00000006
PWM3OF                            00000DB7
PWM3OFCON                         00000DC0
PWM3OFH                           00000DB8
PWM3OFH0                          00000000
PWM3OFH1                          00000001
PWM3OFH2                          00000002
PWM3OFH3                          00000003
PWM3OFH4                          00000004
PWM3OFH5                          00000005
PWM3OFH6                          00000006
PWM3OFH7                          00000007
PWM3OFIE                          00000003
PWM3OFIF                          00000003
PWM3OFL                           00000DB7
PWM3OFL0                          00000000
PWM3OFL1                          00000001
PWM3OFL2                          00000002
PWM3OFL3                          00000003
PWM3OFL4                          00000004
PWM3OFL5                          00000005
PWM3OFL6                          00000006
PWM3OFL7                          00000007
PWM3OFM0                          00000005
PWM3OFM1                          00000006
PWM3OFMC                          00000004
PWM3OFS0                          00000000
PWM3OFS1                          00000001
PWM3OUT                           00000005
PWM3OUT_A                         00000002
PWM3PH                            00000DB1
PWM3PHH                           00000DB2
PWM3PHH0                          00000000
PWM3PHH1                          00000001
PWM3PHH2                          00000002
PWM3PHH3                          00000003
PWM3PHH4                          00000004
PWM3PHH5                          00000005
PWM3PHH6                          00000006
PWM3PHH7                          00000007
PWM3PHIE                          00000002
PWM3PHIF                          00000002
PWM3PHL                           00000DB1
PWM3PHL0                          00000000
PWM3PHL1                          00000001
PWM3PHL2                          00000002
PWM3PHL3                          00000003
PWM3PHL4                          00000004
PWM3PHL5                          00000005
PWM3PHL6                          00000006
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 61


SYMBOL TABLE
  LABEL                             VALUE 

PWM3PHL7                          00000007
PWM3POL                           00000004
PWM3PR                            00000DB5
PWM3PRH                           00000DB6
PWM3PRH0                          00000000
PWM3PRH1                          00000001
PWM3PRH2                          00000002
PWM3PRH3                          00000003
PWM3PRH4                          00000004
PWM3PRH5                          00000005
PWM3PRH6                          00000006
PWM3PRH7                          00000007
PWM3PRIE                          00000000
PWM3PRIF                          00000000
PWM3PRL                           00000DB5
PWM3PRL0                          00000000
PWM3PRL1                          00000001
PWM3PRL2                          00000002
PWM3PRL3                          00000003
PWM3PRL4                          00000004
PWM3PRL5                          00000005
PWM3PRL6                          00000006
PWM3PRL7                          00000007
PWM3PS0                           00000004
PWM3PS1                           00000005
PWM3PS2                           00000006
PWM3TMR                           00000DB9
PWM3TMRH                          00000DBA
PWM3TMRH0                         00000000
PWM3TMRH1                         00000001
PWM3TMRH2                         00000002
PWM3TMRH3                         00000003
PWM3TMRH4                         00000004
PWM3TMRH5                         00000005
PWM3TMRH6                         00000006
PWM3TMRH7                         00000007
PWM3TMRL                          00000DB9
PWM3TMRL0                         00000000
PWM3TMRL1                         00000001
PWM3TMRL2                         00000002
PWM3TMRL3                         00000003
PWM3TMRL4                         00000004
PWM3TMRL5                         00000005
PWM3TMRL6                         00000006
PWM3TMRL7                         00000007
PWMEN                             00000D8E
PWMLD                             00000D8F
PWMOUT                            00000D90
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 62


SYMBOL TABLE
  LABEL                             VALUE 

RA5                               00000005
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCREG                             00000199
RCSTA                             0000019D
RD                                00000000
ROW1_Y                            0000004A
ROW2_Y                            00000052
ROW3_Y                            0000005A
ROW4_Y                            00000062
ROW5_Y                            0000006A
RX9                               00000006
RX9D                              00000000
RXDTSEL                           00000007
SBOREN                            00000007
SCKP                              00000004
SCS0                              00000000
SCS1                              00000001
SENDB                             00000003
SLRA0                             00000000
SLRA1                             00000001
SLRA2                             00000002
SLRA4                             00000004
SLRA5                             00000005
SLRCONA                           0000030C
SP                                FSR0
SPBRG                             0000019B
SPBRGH                            0000019C
SPBRGL                            0000019B
SPEN                              00000007
SPLLEN                            00000007
SREN                              00000005
STACK_SIZE                        00000010
START                             00000000
START_BTN                         00000003
STATUS                            00000003
STATUS_SHAD                       00000FE4
STKOVF                            00000007
STKPTR                            00000FED
STKUNF                            00000006
SWDTEN                            00000000
SYNC                              00000004
SYNC_OUT                          00000002
T                                 INDF0
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000018
T1GCON                            00000019
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 63


SYMBOL TABLE
  LABEL                             VALUE 

T1GGO                             00000003
T1GGO_NOT_DONE                    00000003
T1GPOL                            00000006
T1GSEL                            00000003
T1GSPM                            00000004
T1GSS0                            00000000
T1GSS1                            00000001
T1GTM                             00000005
T1GVAL                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             0000001C
T2OUTPS0                          00000003
T2OUTPS1                          00000004
T2OUTPS2                          00000005
T2OUTPS3                          00000006
TMR0                              00000015
TMR0CS                            00000005
TMR0IE                            00000005
TMR0IF                            00000002
TMR0SE                            00000004
TMR1                              00000016
TMR1CS0                           00000006
TMR1CS1                           00000007
TMR1GE                            00000007
TMR1GIE                           00000007
TMR1GIF                           00000007
TMR1H                             00000017
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             00000016
TMR1ON                            00000000
TMR2                              0000001A
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOS                               00000FEE
TOSH                              00000FEF
TOSL                              00000FEE
TRIGSEL0                          00000004
TRIGSEL1                          00000005
TRIGSEL2                          00000006
TRIGSEL3                          00000007
TRISA                             0000008C
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRMT                              00000001
TSEN                              00000005
TSRNG                             00000004
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 64


SYMBOL TABLE
  LABEL                             VALUE 

TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TUN5                              00000005
TX9                               00000006
TX9D                              00000000
TXCKSEL                           00000002
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             0000019A
TXSTA                             0000019E
Tcy                               0000008C
VIDEO_OUT                         00000004
VREGCON                           00000197
VREGPM                            00000001
VSYNC_PULSE                       00000308
W                                 00000000
WDTCON                            00000097
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WDTPS4                            00000005
WPUA                              0000020C
WPUA0                             00000000
WPUA1                             00000001
WPUA2                             00000002
WPUA3                             00000003
WPUA4                             00000004
WPUA5                             00000005
WR                                00000001
WREG                              00000009
WREG_SHAD                         00000FE5
WREN                              00000002
WRERR                             00000003
WUE                               00000001
Z                                 00000002
Z_SHAD                            00000002
_BOREN_NSLEEP                     00003DFF
_BOREN_OFF                        000039FF
_BOREN_ON                         00003FFF
_BOREN_SBODEN                     00003BFF
_BORV_19                          00003FFF
_BORV_HI                          00003BFF
_BORV_LO                          00003FFF
_CLKOUTEN_OFF                     00003FFF
_CLKOUTEN_ON                      000037FF
_CONFIG1                          00008007
_CONFIG2                          00008008
_CP_OFF                           00003FFF
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 65


SYMBOL TABLE
  LABEL                             VALUE 

_CP_ON                            00003F7F
_DEVID1                           00008006
_FOSC_ECH                         00003FFF
_FOSC_ECL                         00003FFD
_FOSC_ECM                         00003FFE
_FOSC_INTOSC                      00003FFC
_IDLOC0                           00008000
_IDLOC1                           00008001
_IDLOC2                           00008002
_IDLOC3                           00008003
_ISR_0008                         00000008
_ISR_000D                         0000000D
_ISR_00AE                         000000AE
_ISR_00B8                         000000B8
_ISR_00F0                         000000F0
_ISR_00F3                         000000F3
_ISR_0103                         00000103
_ISR_01A7                         000001A7
_ISR_01AB                         000001AB
_ISR_01AC                         000001AC
_ISR_01B0                         000001B0
_ISR_01CF                         000001CF
_ISR_01D0                         000001D0
_ISR_01D8                         000001D8
_ISR_01D9                         000001D9
_ISR_01DE                         000001DE
_ISR_01F9                         000001F9
_ISR_01FC                         000001FC
_ISR_0202                         00000202
_ISR_0209                         00000209
_ISR_020A                         0000020A
_ISR_0210                         00000210
_ISR_0222                         00000222
_ISR_0226                         00000226
_ISR_022A                         0000022A
_ISR_022E                         0000022E
_ISR_022F                         0000022F
_ISR_0234                         00000234
_ISR_0238                         00000238
_ISR_023E                         0000023E
_ISR_0243                         00000243
_ISR_0247                         00000247
_ISR_0248                         00000248
_ISR_024D                         0000024D
_ISR_0253                         00000253
_ISR_0258                         00000258
_ISR_025D                         0000025D
_ISR_025E                         0000025E
_ISR_0263                         00000263
_ISR_0280                         00000280
_ISR_0290                         00000290
_ISR_0298                         00000298
_ISR_02AA                         000002AA
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 66


SYMBOL TABLE
  LABEL                             VALUE 

_ISR_02BA                         000002BA
_ISR_02C2                         000002C2
_ISR_02D4                         000002D4
_ISR_02E4                         000002E4
_ISR_02EC                         000002EC
_ISR_02FE                         000002FE
_ISR_030E                         0000030E
_ISR_0316                         00000316
_ISR_0326                         00000326
_ISR_0327                         00000327
_ISR_0336                         00000336
_ISR_033E                         0000033E
_ISR_034D                         0000034D
_ISR_0351                         00000351
_ISR_0352                         00000352
_ISR_035F                         0000035F
_ISR_0362                         00000362
_ISR_0364                         00000364
_ISR_0369                         00000369
_ISR_036A                         0000036A
_ISR_0401                         00000401
_LPBOREN_OFF                      00003FFF
_LPBOREN_ON                       000037FF
_LVP_OFF                          00001FFF
_LVP_ON                           00003FFF
_MAIN_PROG_0006                   00000006
_MAIN_PROG_000D                   0000000D
_MAIN_PROG_005E                   0000005E
_MCLRE_OFF                        00003FBF
_MCLRE_ON                         00003FFF
_PLLEN_OFF                        00003EFF
_PLLEN_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FDF
_STVREN_OFF                       00003DFF
_STVREN_ON                        00003FFF
_WDTE_NSLEEP                      00003FF7
_WDTE_OFF                         00003FE7
_WDTE_ON                          00003FFF
_WDTE_SWDTEN                      00003FEF
_WRT_ALL                          00003FFC
_WRT_BOOT                         00003FFE
_WRT_HALF                         00003FFD
_WRT_OFF                          00003FFF
__12F1572                         00000001
__DEBUG                           
__MPLAB_DEBUGGER_PK3              1
ball_at_left                      0000023C
ball_at_right                     00000251
ball_dx                           00000009
ball_dy                           0000000A
ball_in_middle                    0000021B
ball_lost                         00000101
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 67


SYMBOL TABLE
  LABEL                             VALUE 

ball_speed                        0000000B
ball_timer                        0000000E
ball_x                            00000007
ball_y                            00000008
balls                             000000A8
bcd_add                           00000395
between                           00000176
between_exit                      00000180
black                             
blue                              
bottom_bound                      000000DA
brick_bounce                      0000016F
case                              
check_paddle_bounce               0000010D
chroma_invert                     
chroma_off                        
chroma_on                         
chroma_ref                        
collision                         000000E3
collision_exit                    00000172
d1                                000000A5
d2                                000000A6
d3                                000000A7
dark_green                        
digit_offset                      000003B2
digit_row                         000001C0
digit_version                     00000002
digits                            0000005F
draw_border                       
draw_brick                        
draw_empty                        0000034B
draw_paddle                       0000035D
draw_row1                         00000279
draw_row2                         000002A3
draw_row3                         000002CD
draw_row4                         000002F7
draw_row5                         00000321
draw_score                        0000018A
draw_top_wall                     000001D3
draw_void                         000001EB
draw_void_exit                    00000265
draw_wall                         
dropn                             
eeprom                            00000780
even_field                        00000383
field_end                         0000038D
flags                             00000000
game_init                         000003EB
game_running                      00000093
gray                              white
hi_line                           0000037C
ibw                               000003BF
inc_score                         000003A0
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 68


SYMBOL TABLE
  LABEL                             VALUE 

init_brick_wall                   000003B8
isr                               00000004
isr_exit                          00000029
lcount                            00000001
leave                             
lfsr_rand                         000003C3
lfsr_rand_exit                    000003D2
mauve                             
max_score                         00000780
move_ball                         000000BE
move_ball_exit                    000000E0
move_y                            000000D1
next_task                         
no_ball                           000001FA
no_ball_dly                       000001F7
no_wall_draw                      0000026F
paddle_pos                        00000006
pickn                             
pokew                             
pong                              00000082
popw                              
porch_off                         
porch_on                          
post_last                         00000064
post_vsync                        0000005B
pre_vsync                         0000002E
pushw                             
q                                 0000000A
r                                 00000002
read_button                       000000A2
read_paddle                       000000A6
right_bound                       000000CA
row1                              000000A0
row1_coll                         0000011B
row2                              000000A1
row2_coll                         0000012C
row3                              000000A2
row3_coll                         0000013D
row3_exit                         000002ED
row4                              000000A3
row4_coll                         0000014E
row5                              000000A4
row5_coll                         0000015F
score                             0000000C
score_exit                        000001B6
seed                              00000030
set_ball_dx                       000003D5
set_ball_dx_exit                  000003E9
set_presync                       0000003B
set_vsync                         00000053
skip_2_tasks                      0000009B
slice                             00000002
sound                             00000076
MPASM 5.83  /HOME/JACQUES/GITHUB/BREAKOUT_15   3-13-2019  13:39:07         PAGE 69


SYMBOL TABLE
  LABEL                             VALUE 

sound_timer                       000000A9
stack                             00000020
swap_var                          
swapw                             
t0delay                           000003FD
task                              00000003
task_switch                       00000012
tdelay                            
temp                              00000004
temp2                             00000005
top_wall_exit                     000001E1
user_input                        00000089
video_first                       00000182
vsync                             00000046
vsync_end                         00000068
wait_field_end                    00000376
wait_trigger                      00000095
white                             
yellow                            
yes_ball                          00000214

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,   316 suppressed

